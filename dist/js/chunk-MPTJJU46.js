import{a as gi,c as bi,d as jt,e as ge,f as be,g as we}from"./chunk-5GOQA2B2.js";var ve=gi((Ki,Zt)=>{"use strict";var wi=Object.prototype.hasOwnProperty,B="~";function yt(){}Object.create&&(yt.prototype=Object.create(null),new yt().__proto__||(B=!1));function Mi(i,t,e){this.fn=i,this.context=t,this.once=e||!1}function Me(i,t,e,s,r){if(typeof e!="function")throw new TypeError("The listener must be a function");var n=new Mi(e,s||i,r),o=B?B+t:t;return i._events[o]?i._events[o].fn?i._events[o]=[i._events[o],n]:i._events[o].push(n):(i._events[o]=n,i._eventsCount++),i}function kt(i,t){--i._eventsCount===0?i._events=new yt:delete i._events[t]}function X(){this._events=new yt,this._eventsCount=0}X.prototype.eventNames=function(){var t=[],e,s;if(this._eventsCount===0)return t;for(s in e=this._events)wi.call(e,s)&&t.push(B?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};X.prototype.listeners=function(t){var e=B?B+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,n=s.length,o=new Array(n);r<n;r++)o[r]=s[r].fn;return o};X.prototype.listenerCount=function(t){var e=B?B+t:t,s=this._events[e];return s?s.fn?1:s.length:0};X.prototype.emit=function(t,e,s,r,n,o){var h=B?B+t:t;if(!this._events[h])return!1;var a=this._events[h],c=arguments.length,d,l;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,e),!0;case 3:return a.fn.call(a.context,e,s),!0;case 4:return a.fn.call(a.context,e,s,r),!0;case 5:return a.fn.call(a.context,e,s,r,n),!0;case 6:return a.fn.call(a.context,e,s,r,n,o),!0}for(l=1,d=new Array(c-1);l<c;l++)d[l-1]=arguments[l];a.fn.apply(a.context,d)}else{var f=a.length,u;for(l=0;l<f;l++)switch(a[l].once&&this.removeListener(t,a[l].fn,void 0,!0),c){case 1:a[l].fn.call(a[l].context);break;case 2:a[l].fn.call(a[l].context,e);break;case 3:a[l].fn.call(a[l].context,e,s);break;case 4:a[l].fn.call(a[l].context,e,s,r);break;default:if(!d)for(u=1,d=new Array(c-1);u<c;u++)d[u-1]=arguments[u];a[l].fn.apply(a[l].context,d)}}return!0};X.prototype.on=function(t,e,s){return Me(this,t,e,s,!1)};X.prototype.once=function(t,e,s){return Me(this,t,e,s,!0)};X.prototype.removeListener=function(t,e,s,r){var n=B?B+t:t;if(!this._events[n])return this;if(!e)return kt(this,n),this;var o=this._events[n];if(o.fn)o.fn===e&&(!r||o.once)&&(!s||o.context===s)&&kt(this,n);else{for(var h=0,a=[],c=o.length;h<c;h++)(o[h].fn!==e||r&&!o[h].once||s&&o[h].context!==s)&&a.push(o[h]);a.length?this._events[n]=a.length===1?a[0]:a:kt(this,n)}return this};X.prototype.removeAllListeners=function(t){var e;return t?(e=B?B+t:t,this._events[e]&&kt(this,e)):(this._events=new yt,this._eventsCount=0),this};X.prototype.off=X.prototype.removeListener;X.prototype.addListener=X.prototype.on;X.prefixed=B;X.EventEmitter=X;typeof Zt<"u"&&(Zt.exports=X)});var ot=(i=>(i.Renderer="renderer",i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i))(ot||{}),Kt=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Ct=(i,t)=>Kt(i).priority??t,Pt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Kt).forEach(t=>{t.type.forEach(e=>this._removeHandlers[e]?.(t))}),this},add(...i){return i.map(Kt).forEach(t=>{t.type.forEach(e=>{let s=this._addHandlers,r=this._queue;s[e]?s[e](t):(r[e]=r[e]||[],r[e].push(t))})}),this},handle(i,t,e){let s=this._addHandlers,r=this._removeHandlers;if(s[i]||r[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=t,r[i]=e;let n=this._queue;return n[i]&&(n[i].forEach(o=>t(o)),delete n[i]),this},handleByMap(i,t){return this.handle(i,e=>{t[e.name]=e.ref},e=>{delete t[e.name]})},handleByNamedList(i,t,e=-1){return this.handle(i,s=>{t.findIndex(n=>n.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((n,o)=>Ct(o.value,e)-Ct(n.value,e)))},s=>{let r=t.findIndex(n=>n.name===s.name);r!==-1&&t.splice(r,1)})},handleByList(i,t,e=-1){return this.handle(i,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((r,n)=>Ct(n,e)-Ct(r,e)))},s=>{let r=t.indexOf(s.ref);r!==-1&&t.splice(r,1)})}};var S=class{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new S(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Jt.x=0,Jt.y=0,Jt}},Jt=new S;var St=[new S,new S,new S,new S],k=class{constructor(t=0,e=0,s=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new k(0,0,0,0)}clone(){return new k(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){let M=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=M)return!1;let H=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>H}let s=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=s||o<=n)return!1;let h=St[0].set(t.left,t.top),a=St[1].set(t.left,t.bottom),c=St[2].set(t.right,t.top),d=St[3].set(t.right,t.bottom);if(c.x<=h.x||a.y<=h.y)return!1;let l=Math.sign(e.a*e.d-e.b*e.c);if(l===0||(e.apply(h,h),e.apply(a,a),e.apply(c,c),e.apply(d,d),Math.max(h.x,a.x,c.x,d.x)<=s||Math.min(h.x,a.x,c.x,d.x)>=r||Math.max(h.y,a.y,c.y,d.y)<=n||Math.min(h.y,a.y,c.y,d.y)>=o))return!1;let f=l*(a.y-h.y),u=l*(h.x-a.x),m=f*s+u*n,_=f*r+u*n,x=f*s+u*o,y=f*r+u*o;if(Math.max(m,_,x,y)<=f*h.x+u*h.y||Math.min(m,_,x,y)>=f*d.x+u*d.y)return!1;let p=l*(h.y-c.y),b=l*(c.x-h.x),Y=p*s+b*n,D=p*r+b*n,P=p*s+b*o,v=p*r+b*o;return!(Math.max(Y,D,P,v)<=p*h.x+b*h.y||Math.min(Y,D,P,v)>=p*d.x+b*d.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){let e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,e=.001){let s=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=r-this.y,this}enlarge(t){let e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=r,this.height=n-r,this}getBounds(t){return t=t||new k,t.copyFrom(this),t}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};var Te=bi(ve(),1);var $=Te.default;be([we]);var Z=class{constructor(i=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=i}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(i){return this.value=i,this}set value(i){if(i instanceof Z)this._value=this._cloneSource(i._value),this._int=i._int,this._components.set(i._components);else{if(i===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,i))&&(this._normalize(i),this._value=this._cloneSource(i))}}get value(){return this._value}_cloneSource(i){return typeof i=="string"||typeof i=="number"||i instanceof Number||i===null?i:Array.isArray(i)||ArrayBuffer.isView(i)?i.slice(0):typeof i=="object"&&i!==null?{...i}:i}_isSourceEqual(i,t){let e=typeof i;if(e!==typeof t)return!1;if(e==="number"||e==="string"||i instanceof Number)return i===t;if(Array.isArray(i)&&Array.isArray(t)||ArrayBuffer.isView(i)&&ArrayBuffer.isView(t))return i.length!==t.length?!1:i.every((r,n)=>r===t[n]);if(i!==null&&t!==null){let r=Object.keys(i),n=Object.keys(t);return r.length!==n.length?!1:r.every(o=>i[o]===t[o])}return i===t}toRgba(){let[i,t,e,s]=this._components;return{r:i,g:t,b:e,a:s}}toRgb(){let[i,t,e]=this._components;return{r:i,g:t,b:e}}toRgbaString(){let[i,t,e]=this.toUint8RgbArray();return`rgba(${i},${t},${e},${this.alpha})`}toUint8RgbArray(i){let[t,e,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),i=i||this._arrayRgb,i[0]=Math.round(t*255),i[1]=Math.round(e*255),i[2]=Math.round(s*255),i}toArray(i){this._arrayRgba||(this._arrayRgba=[]),i=i||this._arrayRgba;let[t,e,s,r]=this._components;return i[0]=t,i[1]=e,i[2]=s,i[3]=r,i}toRgbArray(i){this._arrayRgb||(this._arrayRgb=[]),i=i||this._arrayRgb;let[t,e,s]=this._components;return i[0]=t,i[1]=e,i[2]=s,i}toNumber(){return this._int}toBgrNumber(){let[i,t,e]=this.toUint8RgbArray();return(e<<16)+(t<<8)+i}toLittleEndianNumber(){let i=this._int;return(i>>16)+(i&65280)+((i&255)<<16)}multiply(i){let[t,e,s,r]=Z._temp.setValue(i)._components;return this._components[0]*=t,this._components[1]*=e,this._components[2]*=s,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(i,t=!0){return t&&(this._components[0]*=i,this._components[1]*=i,this._components[2]*=i),this._components[3]=i,this._refreshInt(),this._value=null,this}toPremultiplied(i,t=!0){if(i===1)return(255<<24)+this._int;if(i===0)return t?0:this._int;let e=this._int>>16&255,s=this._int>>8&255,r=this._int&255;return t&&(e=e*i+.5|0,s=s*i+.5|0,r=r*i+.5|0),(i*255<<24)+(e<<16)+(s<<8)+r}toHex(){let i=this._int.toString(16);return`#${"000000".substring(0,6-i.length)+i}`}toHexa(){let t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(i){return this._components[3]=this._clamp(i),this}_normalize(i){let t,e,s,r;if((typeof i=="number"||i instanceof Number)&&i>=0&&i<=16777215){let n=i;t=(n>>16&255)/255,e=(n>>8&255)/255,s=(n&255)/255,r=1}else if((Array.isArray(i)||i instanceof Float32Array)&&i.length>=3&&i.length<=4)i=this._clamp(i),[t,e,s,r=1]=i;else if((i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&i.length>=3&&i.length<=4)i=this._clamp(i,0,255),[t,e,s,r=255]=i,t/=255,e/=255,s/=255,r/=255;else if(typeof i=="string"||typeof i=="object"){if(typeof i=="string"){let o=Z.HEX_PATTERN.exec(i);o&&(i=`#${o[2]}`)}let n=ge(i);n.isValid()&&({r:t,g:e,b:s,a:r}=n.rgba,t/=255,e/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=e,this._components[2]=s,this._components[3]=r,this._refreshInt();else throw new Error(`Unable to convert color ${i}`)}_refreshInt(){this._clamp(this._components);let[i,t,e]=this._components;this._int=(i*255<<16)+(t*255<<8)+(e*255|0)}_clamp(i,t=0,e=1){return typeof i=="number"?Math.min(Math.max(i,t),e):(i.forEach((s,r)=>{i[r]=Math.min(Math.max(s,t),e)}),i)}static isColorLike(i){return typeof i=="number"||typeof i=="string"||i instanceof Number||i instanceof Z||Array.isArray(i)||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i.r!==void 0&&i.g!==void 0&&i.b!==void 0||i.r!==void 0&&i.g!==void 0&&i.b!==void 0&&i.a!==void 0||i.h!==void 0&&i.s!==void 0&&i.l!==void 0||i.h!==void 0&&i.s!==void 0&&i.l!==void 0&&i.a!==void 0||i.h!==void 0&&i.s!==void 0&&i.v!==void 0||i.h!==void 0&&i.s!==void 0&&i.v!==void 0&&i.a!==void 0}},F=Z;F.shared=new Z;F._temp=new Z;F.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var Ce=Math.PI*2,Pe=180/Math.PI,Se=Math.PI/180;var g=class{constructor(t=1,e=0,s=0,r=1,n=0,o=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=r,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,r,n,o){return this.a=t,this.b=e,this.c=s,this.d=r,this.tx=n,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));let s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new S;let s=t.x,r=t.y;return e.x=this.a*s+this.c*r+this.tx,e.y=this.b*s+this.d*r+this.ty,e}applyInverse(t,e){e=e||new S;let s=this.a,r=this.b,n=this.c,o=this.d,h=this.tx,a=this.ty,c=1/(s*o+n*-r),d=t.x,l=t.y;return e.x=o*c*d+-n*c*l+(a*n-h*o)*c,e.y=s*c*l+-r*c*d+(-a*s+h*r)*c,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){let e=Math.cos(t),s=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*s,this.b=r*s+this.b*e,this.c=n*e-this.d*s,this.d=n*s+this.d*e,this.tx=o*e-this.ty*s,this.ty=o*s+this.ty*e,this}append(t){let e=this.a,s=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*s+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*s+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*s+t.ty*n+this.ty,this}appendFrom(t,e){let s=t.a,r=t.b,n=t.c,o=t.d,h=t.tx,a=t.ty,c=e.a,d=e.b,l=e.c,f=e.d;return this.a=s*c+r*l,this.b=s*d+r*f,this.c=n*c+o*l,this.d=n*d+o*f,this.tx=h*c+a*l+e.tx,this.ty=h*d+a*f+e.ty,this}setTransform(t,e,s,r,n,o,h,a,c){return this.a=Math.cos(h+c)*n,this.b=Math.sin(h+c)*n,this.c=-Math.sin(h-a)*o,this.d=Math.cos(h-a)*o,this.tx=t-(s*this.a+r*this.c),this.ty=e-(s*this.b+r*this.d),this}prepend(t){let e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){let s=this.a,r=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){let e=this.a,s=this.b,r=this.c,n=this.d,o=t.pivot,h=-Math.atan2(-r,n),a=Math.atan2(s,e),c=Math.abs(h+a);return c<1e-5||Math.abs(Ce-c)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=a),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*s+o.y*n),t}invert(){let t=this.a,e=this.b,s=this.c,r=this.d,n=this.tx,o=t*r-e*s;return this.a=r/o,this.b=-e/o,this.c=-s/o,this.d=t/o,this.tx=(s*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let t=new g;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Ti.identity()}static get shared(){return vi.identity()}},vi=new g,Ti=new g;var U=class{constructor(t,e,s){this._x=e||0,this._y=s||0,this._observer=t}clone(t){return new U(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer.onUpdate()),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer.onUpdate()),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer.onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer.onUpdate(this))}};var Qt={default:-1};function R(i="default"){return Qt[i]===void 0&&(Qt[i]=-1),++Qt[i]}var ke={},E="8.0.0";function T(i,t,e=3){if(ke[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`):(s=s.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${i}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`),console.warn(s))),ke[t]=!0}function At(i,t,e){let s=i.length,r;if(t>=s||e===0)return;e=t+e>s?s-t:e;let n=s-e;for(r=t;r<n;++r)i[r]=i[r+e];i.length=n}var Ae={allowChildren:!0,removeChildren(i=0,t){let e=t??this.children.length,s=e-i,r=[];if(s>0&&s<=e){for(let n=e-1;n>=i;n--){let o=this.children[n];!o||(this.layerGroup&&this.layerGroup.removeChild(o),r.push(o),o.parent=null)}At(this.children,i,e);for(let n=0;n<r.length;++n)this.emit("childRemoved",r[n],this,n),r[n].emit("removed",this);return r}else if(s===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){let t=this.getChildAt(i);return this.removeChild(t)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,t)},getChildIndex(i){let t=this.children.indexOf(i);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(i,t){this.allowChildren||T(E,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:e}=this;if(t<0||t>e.length)throw new Error(`${i}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(i.parent){let s=i.parent.children.indexOf(i);if(i.parent===this&&s===t)return i;s!==-1&&i.parent.children.splice(s,1)}return t===e.length?e.push(i):e.splice(t,0,i),i.parent=this,i.didChange=!0,i.didViewUpdate=!1,i._updateFlags=15,this.layerGroup&&this.layerGroup.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,t),i.emit("added",this),i},swapChildren(i,t){if(i===t)return;let e=this.getChildIndex(i),s=this.getChildIndex(t);this.children[e]=t,this.children[s]=i},removeFromParent(){this.parent?.removeChild(this)}};var te=class{constructor(t){this.pipe="filter",this.priority=1,this.filters=t?.filters}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null}},Ie=[];function Ee(i){let t=Ie.pop()||new te;return t.filters=i,t}function Re(i){i.filters=null,Ie.push(i)}var It=class{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._pool.length}get totalUsed(){return this._count-this._pool.length}};var ee=class{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new It(t)),this._poolsByClass.get(t)}stats(){let t={};return this._poolsByClass.forEach(e=>{let s=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[s]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}},ie=new ee;var se=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){let s=this._tests[e];if(s.test(t))return ie.get(s.maskClass,t)}return t}returnMaskEffect(t){ie.return(t)}},Et=new se;Pt.handleByList(ot.MaskEffect,Et._effectClasses);var Fe={_mask:null,_filters:null,effects:[],addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((e,s)=>e.priority-s.priority),!this.isLayerRoot&&this.layerGroup&&(this.layerGroup.structureDidChange=!0),this._updateIsSimple())},removeEffect(i){let t=this.effects.indexOf(i);t!==-1&&(this.effects.splice(t,1),!this.isLayerRoot&&this.layerGroup&&(this.layerGroup.structureDidChange=!0),this._updateIsSimple())},set mask(i){if(this._mask||(this._mask={mask:null,effect:null}),this._mask.mask===i||(this._mask.effect&&(this.removeEffect(this._mask.effect),Et.returnMaskEffect(this._mask.effect),this._mask.effect=null),this._mask.mask=i,i==null))return;let t=Et.getMaskEffect(i);this._mask.effect=t,this.addEffect(t)},get mask(){return this._mask?.mask},set filters(i){if(!Array.isArray(i)&&i!==null&&(i=[i]),this._filters||(this._filters={filters:null,effect:null}),this._filters.filters===i||(this._filters.effect&&(this.removeEffect(this._filters.effect),Re(this._filters.effect),this._filters.effect=null),this._filters.filters=i,!i))return;let t=Ee(i);this._filters.effect=t,this.addEffect(t)},get filters(){return this._filters?.filters}};var Le={label:null,get name(){return T(E,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){T(E,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,t=!1){return this.getChildByLabel(i,t)},getChildByLabel(i,t=!1){let e=this.children;for(let s=0;s<e.length;s++){let r=e[s];if(r.label===i||i instanceof RegExp&&i.test(r.label))return r}if(t)for(let s=0;s<e.length;s++){let n=e[s].getChildByLabel(i,!0);if(n)return n}return null},getChildrenByLabel(i,t=!1,e=[]){let s=this.children;for(let r=0;r<s.length;r++){let n=s[r];(n.label===i||i instanceof RegExp&&i.test(n.label))&&e.push(n)}if(t)for(let r=0;r<s.length;r++)s[r].getChildrenByLabel(i,!0,e);return e}};var V=class{constructor(t=1/0,e=1/0,s=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this._matrixStack=[],this.matrix=new g,this.minX=t,this.minY=e,this.maxX=s,this.maxY=r}get rectangle(){this._rectangle||(this._rectangle=new k);let t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this._matrixStack.length=0,this.matrix.identity()}pushMatrix(t){this._matrixStack.push(t),this._matrixStack.length>1?(this.matrix.copyFrom(this._matrixStack[this._matrixStack.length-2]),this.matrix.append(t)):this.matrix.copyFrom(t)}popMatrix(){this._matrixStack.pop(),this._matrixStack.length>1?(this.matrix.copyFrom(this._matrixStack[this._matrixStack.length-2]),this.matrix.append(this._matrixStack[this._matrixStack.length-1])):this._matrixStack.length===1?this.matrix.copyFrom(this._matrixStack[0]):this.matrix.identity()}setMatrix(t){this.matrix.copyFrom(t)}set(t,e,s,r){this.minX=t,this.minY=e,this.maxX=s,this.maxY=r}addFrame(t,e,s,r){let n=this.matrix,o=n.a,h=n.b,a=n.c,c=n.d,d=n.tx,l=n.ty,f=this.minX,u=this.minY,m=this.maxX,_=this.maxY,x=o*t+a*e+d,y=h*t+c*e+l;f=x<f?x:f,u=y<u?y:u,m=x>m?x:m,_=y>_?y:_,x=o*s+a*e+d,y=h*s+c*e+l,f=x<f?x:f,u=y<u?y:u,m=x>m?x:m,_=y>_?y:_,x=o*t+a*r+d,y=h*t+c*r+l,f=x<f?x:f,u=y<u?y:u,m=x>m?x:m,_=y>_?y:_,x=o*s+a*r+d,y=h*s+c*r+l,f=x<f?x:f,u=y<u?y:u,m=x>m?x:m,_=y>_?y:_,this.minX=f,this.minY=u,this.maxX=m,this.maxY=_}addRect(t){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height)}addBounds(t){this.addFrame(t.minX,t.minY,t.maxX,t.maxY)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){let e=this.minX,s=this.minY,r=this.maxX,n=this.maxY,{a:o,b:h,c:a,d:c,tx:d,ty:l}=t,f=o*e+a*s+d,u=h*e+c*s+l;this.minX=f,this.minY=u,this.maxX=f,this.maxY=u,f=o*r+a*s+d,u=h*r+c*s+l,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY,f=o*e+a*n+d,u=h*e+c*n+l,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY,f=o*r+a*n+d,u=h*r+c*n+l,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new V(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}get y(){return this.minY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,s){let r=this.minX,n=this.minY,o=this.maxX,h=this.maxY,a=this.matrix,c=a.a,d=a.b,l=a.c,f=a.d,u=a.tx,m=a.ty;for(let _=e;_<s;_+=2){let x=t[_],y=t[_+1],p=c*x+l*y+u,b=d*x+f*y+m;r=p<r?p:r,n=b<n?b:n,o=p>o?p:o,h=b>h?b:h}this.minX=r,this.minY=n,this.maxX=o,this.maxY=h}toString(){return`[@pixi:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}};function K(i,t){let e=t._scale,s=t._pivot,r=t._position,n=e._x,o=e._y,h=s._x,a=s._y;i.a=t._cx*n,i.b=t._sx*n,i.c=t._cy*o,i.d=t._sy*o,i.tx=r._x-(h*i.a+a*i.c),i.ty=r._y-(h*i.b+a*i.d)}function Ye(i,t,e){e.clear();let s;return i.parent?t?s=i.parent.worldTransform:s=_t(i,new g):s=g.IDENTITY,De(i,e,s,t),e.isValid||e.set(0,0,0,0),e}function De(i,t,e,s){if(!i.visible||!i.measurable)return;let r;s?r=i.worldTransform:(i.didChange&&K(i.localTransform,i),r=g.shared.appendFrom(i.localTransform,e).clone());let n=t,o=!!i.effects.length;o&&(t=t.clone()),i.view&&(t.setMatrix(r),i.view.addBounds(t));for(let h=0;h<i.children.length;h++)De(i.children[h],t,r,s);if(o){for(let h=0;h<i.effects.length;h++)i.effects[h].addBounds?.(t);n.setMatrix(g.IDENTITY),n.addBounds(t)}}function _t(i,t){let e=i.parent;return e&&(_t(e,t),e.didChange&&K(e.localTransform,e),t.append(e.localTransform)),t}var re=0,Oe=500;function W(...i){re!==Oe&&(re++,re===Oe?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}function ht(i,t,e){t.clear(),e||(e=new g),i.view&&(t.setMatrix(e),i.view.addBounds(t));for(let s=0;s<i.children.length;s++)Xe(i.children[s],t,e,i);return t.isValid||t.set(0,0,0,0),t}function Xe(i,t,e,s){if(!i.visible||!i.measurable)return;i.didChange&&K(i.localTransform,i);let r=i.localTransform,n=g.shared.appendFrom(r,e).clone(),o=t,h=!!i.effects.length;h&&(t=new V),i.view&&(t.setMatrix(n),i.view.addBounds(t));for(let a=0;a<i.children.length;a++)Xe(i.children[a],t,n,s);if(h){for(let a=0;a<i.effects.length;a++)i.effects[a].addLocalBounds?.(t,s);o.setMatrix(g.IDENTITY),o.addBounds(t)}}var xt=new V,gt=new g,Ue={get width(){return Math.abs(this.scale.x*ht(this,xt,gt).width)},set width(i){let t=ht(this,xt,gt).width;t!==0?this.scale.x=i/t:this.scale.x=1},get height(){return Math.abs(this.scale.y*ht(this,xt,gt).height)},set height(i){let t=ht(this,xt,gt).height;t!==0?this.scale.y=i/t:this.scale.y=1},getLocalBounds(i){let t=ht(this,new V,gt);return i?i.copyFromBounds(t):t.rectangle.clone()},getBounds(i,t){let e=Ye(this,i,xt);return t?t.copyFromBounds(e):e.rectangle.clone()}};var Be={_onRender:null,set onRender(i){let t=this.layerGroup;if(!i){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}};var Ge={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0)},sortChildren(){!this.sortDirty||(this.sortDirty=!1,this.children.sort(Ci))}};function Ci(i,t){return i._zIndex-t._zIndex}var He={getGlobalPosition(i=new S,t=!1){return this.parent?this.parent.toGlobal(this._position,i,t):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,t,e=!1){if(!e){this.didChange&&K(this.localTransform,this);let s=_t(this,new g);return s.append(this.localTransform),s.apply(i,t)}return this.worldTransform.apply(i,t)},toLocal(i,t,e,s){if(t&&(i=t.toGlobal(i,e,s)),!s){this.didChange&&K(this.localTransform,this);let r=_t(this,new g);return r.append(this.localTransform),r.applyInverse(i,e)}return this.worldTransform.applyInverse(i,e)}};var Rt=class{constructor(){this.uid=R("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}lastInstruction(){return this.instructions[this.instructionSize-1]}};var Ft=class{constructor(t){this.type="layer",this.root=null,this.canBundle=!1,this.layerGroupParent=null,this.layerGroupChildren=[],this._children=[],this.worldTransform=new g,this.worldColor=4294967295,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Rt,this._onRenderContainers=[],this.root=t,this.addChild(t)}get localTransform(){return this.root.localTransform}get layerTransform(){return this.root.layerTransform}addLayerGroupChild(t){t.layerGroupParent&&t.layerGroupParent._removeLayerGroupChild(t),t.layerGroupParent=this,this.onChildUpdate(t.root),this.layerGroupChildren.push(t)}_removeLayerGroupChild(t){t.root.didChange&&this._removeChildFromUpdate(t.root);let e=this.layerGroupChildren.indexOf(t);e>-1&&this.layerGroupChildren.splice(e,1),t.layerGroupParent=null}addChild(t){if(this.structureDidChange=!0,t!==this.root&&(this._children.push(t),t.updateTick=-1,t.parent===this.root?t.relativeLayerDepth=1:t.relativeLayerDepth=t.parent.relativeLayerDepth+1,t._onRender&&this.addOnRender(t)),t.layerGroup){if(t.layerGroup.root===t){this.addLayerGroupChild(t.layerGroup);return}}else t.layerGroup=this,t.didChange=!0;let e=t.children;t.isLayerRoot||this.onChildUpdate(t);for(let s=0;s<e.length;s++)this.addChild(e[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&this.removeOnRender(t),t.layerGroup.root!==t){let s=t.children;for(let r=0;r<s.length;r++)this.removeChild(s[r]);t.didChange&&t.layerGroup._removeChildFromUpdate(t),t.layerGroup=null}else this._removeLayerGroupChild(t.layerGroup);let e=this._children.indexOf(t);e>-1&&this._children.splice(e,1)}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeLayerDepth];e||(e=this.childrenToUpdate[t.relativeLayerDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.layerVisibleRenderable<3||(t.didViewUpdate=!1,this.instructionSet.renderPipes[t.view.renderPipeId].updateRenderable(t))}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}_removeChildFromUpdate(t){let e=this.childrenToUpdate[t.relativeLayerDepth];if(!e)return;let s=e.list.indexOf(t);s>-1&&e.list.splice(s,1),e.index--}get isRenderable(){let t=this.worldColor>>24&255;return this.root.localVisibleRenderable===3&&t>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){this._onRenderContainers.forEach(t=>{t._onRender()})}};function $e(i){return Object.fromEntries(Object.entries(i).filter(([t,e])=>e!==void 0))}var Ve=new U(null),ne=new U(null),oe=new U(null,1,1),Ne=1,Pi=2,We=4;var G=class extends ${constructor(t={}){super(),this.uid=R("renderable"),this._updateFlags=15,this.isLayerRoot=!1,this.layerGroup=null,this.didChange=!1,this.didViewUpdate=!1,this.relativeLayerDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new g,this.layerTransform=new g,this.destroyed=!1,this._position=new U(this,0,0),this._scale=oe,this._pivot=ne,this._skew=Ve,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=4294967295,this.layerColor=4294967295,this.localBlendMode="inherit",this.layerBlendMode="normal",this.localVisibleRenderable=3,this.layerVisibleRenderable=3,t.view&&(this.view=t.view,this.view.owner=this,t.view=void 0),Object.assign(this,$e(t)),this.children=[],t.children?.forEach(e=>this.addChild(e)),this.effects=[],t.effects?.forEach(e=>this.addEffect(e))}static mixin(t){Object.defineProperties(G.prototype,Object.getOwnPropertyDescriptors(t))}addChild(...t){if(this.allowChildren||T(E,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let s=0;s<t.length;s++)this.addChild(t[s]);return t[0]}let e=t[0];return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e.didViewUpdate=!1,e._updateFlags=15,this.layerGroup&&this.layerGroup.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let r=0;r<t.length;r++)this.removeChild(t[r]);return t[0]}let e=t[0],s=this.children.indexOf(e);return s>-1&&(this.children.splice(s,1),this.layerGroup&&this.layerGroup.removeChild(e)),e.parent=null,this.emit("childRemoved",e,this,s),e.emit("removed",this),e}onUpdate(t){if(t&&t===this._skew&&this._updateSkew(),!this.didChange)if(this.didChange=!0,this.isLayerRoot){let e=this.layerGroup.layerGroupParent;e&&e.onChildUpdate(this)}else this.layerGroup&&this.layerGroup.onChildUpdate(this)}onViewUpdate(){this.didViewUpdate||(this.didViewUpdate=!0,this.layerGroup&&this.layerGroup.onChildViewUpdate(this))}set layer(t){if(this.isLayerRoot&&t===!1)throw new Error("[Pixi] cannot undo a layer just yet");t&&this.enableLayer()}get layer(){return this.isLayerRoot}enableLayer(){if(this.layerGroup&&this.layerGroup.root===this)return;this.isLayerRoot=!0;let t=this.layerGroup;if(t&&t.removeChild(this),this.layerGroup=new Ft(this),t){for(let e=0;e<t.layerGroupChildren.length;e++){let s=t.layerGroupChildren[e],r=s.root;for(;r;){if(r===this){this.layerGroup.addLayerGroupChild(s);break}r=r.parent}}t.addLayerGroupChild(this.layerGroup)}this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.isLayerRoot&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new g),this.layerGroup&&(this.isLayerRoot?this._worldTransform.copyFrom(this.layerGroup.worldTransform):this._worldTransform.appendFrom(this.layerTransform,this.layerGroup.worldTransform)),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.onUpdate(this._skew))}get angle(){return this.rotation*Pe}set angle(t){this.rotation=t*Se}get pivot(){return this._pivot===ne&&(this._pivot=new U(this,0,0)),this._pivot}set pivot(t){this._pivot===ne&&(this._pivot=new U(this,0,0)),this._pivot.copyFrom(t)}get skew(){return this._skew===Ve&&(this._skew=new U(this,0,0)),this._skew}get scale(){return this._scale===oe&&(this._scale=new U(this,1,1)),this._scale}set scale(t){this._scale===oe&&(this._scale=new U(this,0,0)),this._scale.copyFrom(t)}_updateSkew(){let t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}set alpha(t){t=t*255|0,t!==(this.localColor>>24&255)&&(this.localColor=this.localColor&16777215|t<<24,this._updateFlags|=Ne,this.onUpdate())}get alpha(){return(this.localColor>>24&255)/255}set tint(t){let s=F.shared.setValue(t).toBgrNumber();s!==(this.localColor&16777215)&&(this.localColor=this.localColor&4278190080|s&16777215,this._updateFlags|=Ne,this.onUpdate())}get tint(){let t=this.localColor&16777215;return((t&255)<<16)+(t&65280)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this._updateFlags|=Pi,this.localBlendMode=t,this.onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localVisibleRenderable&2)}set visible(t){let e=t?1:0;(this.localVisibleRenderable&2)>>1!==e&&(this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this._updateFlags|=We,this.localVisibleRenderable=this.localVisibleRenderable&1|e<<1,this.onUpdate())}get renderable(){return!!(this.localVisibleRenderable&1)}set renderable(t){let e=t?1:0;(this.localVisibleRenderable&1)!==e&&(this.localVisibleRenderable=this.localVisibleRenderable&2|e,this._updateFlags|=We,this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this.onUpdate())}get isRenderable(){let t=this.layerColor>>24&255;return this.localVisibleRenderable===3&&t>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0,this.removeFromParent(),this.parent=null,this._mask=null,this._filters=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed"),this.removeAllListeners();let e=typeof t=="boolean"?t:t?.children,s=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<s.length;++r)s[r].destroy(t);this.view&&(this.view.destroy(t),this.view.owner=null)}};G.mixin(Ae);G.mixin(He);G.mixin(Be);G.mixin(Ue);G.mixin(Fe);G.mixin(Le);G.mixin(Ge);var he=Object.create(null),ze=Object.create(null);function qe(i,t){let e=ze[i];return e===void 0&&(he[t]===void 0&&(he[t]=1),ze[i]=e=he[t]++),e}var je=class extends ${constructor(i={}){super(),this.resourceType="textureSampler",this.touched=0,this._maxAnisotropy=1,i={...je.defaultOptions,...i},this.addressMode=i.addressMode,this.addressModeU=i.addressModeU??this.addressModeU,this.addressModeV=i.addressModeV??this.addressModeV,this.addressModeW=i.addressModeW??this.addressModeW,this.scaleMode=i.scaleMode,this.magFilter=i.magFilter??this.magFilter,this.minFilter=i.minFilter??this.minFilter,this.mipmapFilter=i.mipmapFilter??this.mipmapFilter,this.lodMinClamp=i.lodMinClamp,this.lodMaxClamp=i.lodMaxClamp,this.compare=i.compare,this.maxAnisotropy=i.maxAnisotropy??1}set addressMode(i){this.addressModeU=i,this.addressModeV=i,this.addressModeW=i}get addressMode(){return this.addressModeU}set wrapMode(i){T("8","TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=i}get wrapMode(){return this.addressMode}set scaleMode(i){this.magFilter=i,this.minFilter=i,this.mipmapFilter=i}get scaleMode(){return this.magFilter}set maxAnisotropy(i){this._maxAnisotropy=Math.min(i,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get resourceId(){return this._resourceId||this._generateResourceId()}update(){this.emit("change",this),this._resourceId=null}_generateResourceId(){let i=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._resourceId=qe(i,"sampler"),this._resourceId}destroy(){this.emit("destroy",this),this.removeAllListeners()}},Lt=je;Lt.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};var at=class{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=at.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new S,this.page=new S,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,s,r,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}};var Si=jt.default??jt,Ke=Si(globalThis.navigator);var Je={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};G.mixin(Je);var ki=9,Yt=100,Ai=0,Ii=0,Ze=2,Qe=1,Ei=-1e3,Ri=-1e3,Fi=2,Dt=class{constructor(t,e=Ke){this._mobileInfo=e,this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(e.tablet||e.phone)&&this._createTouchHook();let s=document.createElement("div");s.style.width=`${Yt}px`,s.style.height=`${Yt}px`,s.style.position="absolute",s.style.top=`${Ai}px`,s.style.left=`${Ii}px`,s.style.zIndex=Ze.toString(),this._div=s,this._renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let t=document.createElement("button");t.style.width=`${Qe}px`,t.style.height=`${Qe}px`,t.style.position="absolute",t.style.top=`${Ei}px`,t.style.left=`${Ri}px`,t.style.zIndex=Fi.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}_destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.add(this),this._renderer.view.canvas.parentNode?.appendChild(this._div))}_deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this),this._div.parentNode?.removeChild(this._div))}_updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this._addChild(t),t.renderId=this._renderId);let e=t.children;if(e)for(let s=0;s<e.length;s++)this._updateAccessibleObjects(e[s])}init(t){this.debug=t?.debug??this.debug,this._renderer.runners.postrender.remove(this)}postrender(){let t=performance.now();if(this._mobileInfo.android.device&&t<this._androidUpdateCount||(this._androidUpdateCount=t+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered);let{x:e,y:s,width:r,height:n}=this._renderer.view.canvas.getBoundingClientRect(),{width:o,height:h,resolution:a}=this._renderer,c=r/o*a,d=n/h*a,l=this._div;l.style.left=`${e}px`,l.style.top=`${s}px`,l.style.width=`${o}px`,l.style.height=`${h}px`;for(let f=0;f<this._children.length;f++){let u=this._children[f];if(u.renderId!==this._renderId)u._accessibleActive=!1,At(this._children,f,1),this._div.removeChild(u._accessibleDiv),this._pool.push(u._accessibleDiv),u._accessibleDiv=null,f--;else{l=u._accessibleDiv;let m=u.hitArea,_=u.worldTransform;u.hitArea?(l.style.left=`${(_.tx+m.x*_.a)*c}px`,l.style.top=`${(_.ty+m.y*_.d)*d}px`,l.style.width=`${m.width*_.a*c}px`,l.style.height=`${m.height*_.d*d}px`):(m=u.getBounds(),this.capHitArea(m),l.style.left=`${m.x*c}px`,l.style.top=`${m.y*d}px`,l.style.width=`${m.width*c}px`,l.style.height=`${m.height*d}px`,l.title!==u.accessibleTitle&&u.accessibleTitle!==null&&(l.title=u.accessibleTitle),l.getAttribute("aria-label")!==u.accessibleHint&&u.accessibleHint!==null&&l.setAttribute("aria-label",u.accessibleHint)),(u.accessibleTitle!==l.title||u.tabIndex!==l.tabIndex)&&(l.title=u.accessibleTitle,l.tabIndex=u.tabIndex,this.debug&&this.updateDebugHTML(l))}}this._renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);let{width:e,height:s}=this._renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>s&&(t.height=s-t.y)}_addChild(t){let e=this._pool.pop();e||(e=document.createElement("button"),e.style.width=`${Yt}px`,e.style.height=`${Yt}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Ze.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`container ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.container=t,this._children.push(t),this._div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){let{container:s}=t.target,r=this._renderer.events.rootBoundary,n=Object.assign(new at(r),{target:s});r.rootTarget=this._renderer.lastObjectRendered,e.forEach(o=>r.dispatchEvent(n,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===ki&&this._activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this._deactivate()}destroy(){this._destroyTouchHook(),this._div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this._pool=null,this._children=null,this._renderer=null}};Dt.extension={type:[ot.WebGLSystem,ot.WebGPUSystem],name:"accessibility"};Pt.add(Dt);var ti={createCanvas:(i,t)=>{let e=document.createElement("canvas");return e.width=i,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,t)=>fetch(i,t),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};var Ot={ADAPTER:ti,RETINA_PREFIX:/@([0-9\.]+)x/,FAIL_IF_MAJOR_PERFORMANCE_CAVEAT:!1,RESOLUTION:1};var ei=(i,t,e=!1)=>(Array.isArray(i)||(i=[i]),t?i.map(s=>typeof s=="string"||e?t(s):s):i);var ae=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let e=this._cache.get(t);return e||W(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){let s=ei(t),r;for(let h=0;h<this.parsers.length;h++){let a=this.parsers[h];if(a.test(e)){r=a.getCacheableAssets(s,e);break}}r||(r={},s.forEach(h=>{r[h]=e}));let n=Object.keys(r),o={cacheKeys:n,keys:s};s.forEach(h=>{this._cacheMap.set(h,o)}),n.forEach(h=>{this._cache.has(h)&&this._cache.get(h)!==e&&W("[Cache] already has key:",h),this._cache.set(h,r[h])})}remove(t){if(!this._cacheMap.has(t)){W(`[Assets] Asset id ${t} was not found in the Cache`);return}let e=this._cacheMap.get(t);e.cacheKeys.forEach(r=>{this._cache.delete(r)}),e.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}},Xt=new ae;var Ut=()=>{};var ii=class extends ${constructor(i={}){super(),this.options=i,this.uid=R("textureSource"),this.resourceType="textureSource",this.resourceId=R("textureResource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm-srgb",this.dimension="2d",this.antialias=!1,this.depthStencil=!0,this.touched=0,this._batchTick=-1,this._textureBindLocation=-1,i={...ii.defaultOptions,...i},this.resource=i.resource,this._resolution=i.resolution,i.width?this.pixelWidth=i.width*this._resolution:this.pixelWidth=i.resource?.width??1,i.height?this.pixelHeight=i.height*this._resolution:this.pixelHeight=i.resource?.height??1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=i.format,this.dimension=i.dimensions,this.mipLevelCount=i.mipLevelCount,this.autoGenerateMipmaps=i.autoGenerateMipmaps,this.sampleCount=i.sampleCount,this.antialias=i.antialias,this.alphaMode=i.alphaMode;let t=i.style??{};this.style=t instanceof Lt?t:new Lt(t),this.destroyed=!1}get source(){return this}get style(){return this._style}set style(i){this.style!==i&&(this._style?.off("change",this._onStyleChange,this),this._style=i,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}_onStyleChange(){this.emit("styleChange",this)}update(){this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this.resourceId++,this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:i}=this;return i.naturalWidth||i.videoWidth||i.displayWidth||i.width}get resourceHeight(){let{resource:i}=this;return i.naturalHeight||i.videoHeight||i.displayHeight||i.height}get resolution(){return this._resolution}set resolution(i){this._resolution!==i&&(this._resolution=i,this.width=this.pixelWidth/i,this.height=this.pixelHeight/i)}resize(i,t,e){e=e||this._resolution,i=i||this.width,t=t||this.height;let s=Math.round(i*e),r=Math.round(t*e);this.width=s/e,this.height=r/e,this._resolution=e,!(this.pixelWidth===s&&this.pixelHeight===r)&&(this.pixelWidth=s,this.pixelHeight=r,this.emit("resize",this),this.resourceId++,this.emit("change",this))}set wrapMode(i){T(E,"TextureSource.wrapMode property has been deprecated. Use TextureSource.style.addressMode instead."),this._style.wrapMode=i}get wrapMode(){return T(E,"TextureSource.wrapMode property has been deprecated. Use TextureSource.style.addressMode instead."),this._style.wrapMode}set scaleMode(i){T(E,"TextureSource.scaleMode property has been deprecated. Use TextureSource.style.scaleMode instead."),this._style.scaleMode=i}get scaleMode(){return T(E,"TextureSource.scaleMode property has been deprecated. Use TextureSource.style.scaleMode instead."),this._style.scaleMode}},z=ii;z.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"no-premultiply-alpha",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,style:{}};var ct=class extends z{constructor(){super(...arguments),this.uploadMethodId="buffer"}static from(t){let e=t.resource||new Float32Array(t.width*t.height*4),s=t.format;return s||(e instanceof Float32Array?s="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?s="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?s="rgba16uint":(e instanceof Int8Array,s="bgra8unorm")),new ct({...t,format:s})}};var Q=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],tt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],et=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],it=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ce=[],si=[],Bt=Math.sign;function Li(){for(let i=0;i<16;i++){let t=[];ce.push(t);for(let e=0;e<16;e++){let s=Bt(Q[i]*Q[e]+et[i]*tt[e]),r=Bt(tt[i]*Q[e]+it[i]*tt[e]),n=Bt(Q[i]*et[e]+et[i]*it[e]),o=Bt(tt[i]*et[e]+it[i]*it[e]);for(let h=0;h<16;h++)if(Q[h]===s&&tt[h]===r&&et[h]===n&&it[h]===o){t.push(h);break}}}for(let i=0;i<16;i++){let t=new g;t.set(Q[i],tt[i],et[i],it[i],0,0),si.push(t)}}Li();var C={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>Q[i],uY:i=>tt[i],vX:i=>et[i],vY:i=>it[i],inv:i=>i&8?i&15:-i&7,add:(i,t)=>ce[i][t],sub:(i,t)=>ce[i][C.inv(t)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,t)=>Math.abs(i)*2<=Math.abs(t)?t>=0?C.S:C.N:Math.abs(t)*2<=Math.abs(i)?i>0?C.E:C.W:t>0?i>0?C.SE:C.SW:i>0?C.NE:C.NW,matrixAppendRotationInv:(i,t,e=0,s=0)=>{let r=si[C.inv(t)];r.tx=e,r.ty=s,i.append(r)}};var bt=class extends ${constructor(t={}){super(),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=t.frame||new k(0,0,1,1),this.orig=t.orig||this.frame,this.rotate=t.rotate??0,this.trim=t.trim,this.defaultAnchor=t.defaultAnchor,this.defaultBorders=t.defaultBorders,this.updateUvs()}updateUvs(){let t=this.uvs,e=this.frame,s=this.rotate;if(s){let r=e.width/2,n=e.height/2,o=e.x+r,h=e.y+n;s=C.add(s,C.NW),t.x0=o+r*C.uX(s),t.y0=h+n*C.uY(s),s=C.add(s,2),t.x1=o+r*C.uX(s),t.y1=h+n*C.uY(s),s=C.add(s,2),t.x2=o+r*C.uX(s),t.y2=h+n*C.uY(s),s=C.add(s,2),t.x3=o+r*C.uX(s),t.y3=h+n*C.uY(s)}else t.x0=e.x,t.y0=e.y,t.x1=e.x+e.width,t.y1=e.y,t.x2=e.x+e.width,t.y2=e.y+e.height,t.x3=e.x,t.y3=e.y+e.height}update(){this.updateUvs(),this.emit("update",this)}destroy(){this.emit("destroy",this),this.removeAllListeners(),this.frame=null,this.orig=null,this.trim=null,this.defaultAnchor=null,this.uvs=null}};var ri=new g,Gt=class{constructor(t,e){this.mapCoord=new g,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);let s=this.mapCoord;for(let r=0;r<t.length;r+=2){let n=t[r],o=t[r+1];e[r]=n*s.a+o*s.c+s.tx,e[r+1]=n*s.b+o*s.d+s.ty}return e}update(){let t=this._texture;this._updateID++;let e=t.layout.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);let s=t.layout.orig,r=t.layout.trim;r&&(ri.set(s.width/r.width,0,0,s.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(ri));let n=t.source,o=this.uClampFrame,h=this.clampMargin/n._resolution,a=this.clampOffset;return o[0]=(t.frameX+h+a)/n.width,o[1]=(t.frameY+h+a)/n.height,o[2]=(t.frameX+t.frameWidth-h+a)/n.width,o[3]=(t.frameY+t.frameHeight-h+a)/n.height,this.uClampOffset[0]=a/n.pixelWidth,this.uClampOffset[1]=a/n.pixelHeight,this.isSimple=t.frameWidth===n.width&&t.frameHeight===n.height&&t.layout.rotate===0,!0}};var w=class extends ${constructor({source:t,layout:e,label:s,frame:r}={}){if(super(),this.id=R("texture"),this.styleSourceKey=0,this.label=s,this.source=t?.source??new z,e=e instanceof bt?e:new bt(e),r){let{width:n,height:o}=this._source;e.frame.x=r.x/n,e.frame.y=r.y/o,e.frame.width=r.width/n,e.frame.height=r.height/o,e.updateUvs()}this.layout=e,this.destroyed=!1}static from(t){return typeof t=="string"?Xt.get(t):t instanceof z?new w({source:t}):new w({source:new z(t)})}static fromBuffer(t){return new w({source:ct.from({...t,style:{scaleMode:"nearest"}})})}set source(t){this._source&&this._source.off("resize",this.onUpdate,this),this._source=t,t.on("resize",this.onUpdate,this),this.emit("update",this)}get source(){return this._source}get layout(){return this._layout}set layout(t){this._layout?.off("update",this.onUpdate,this),this._layout=t,t.on("update",this.onUpdate,this),this.emit("update",this)}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Gt(this)),this._textureMatrix}set frameWidth(t){this._layout.frame.width=t/this._source.width}get frameWidth(){return this._source.pixelWidth/this._source._resolution*this._layout.frame.width}set frameHeight(t){this._layout.frame.height=t/this._source.height}get frameHeight(){return this._source.pixelHeight/this._source._resolution*this._layout.frame.height}set frameX(t){if(t===0){this._layout.frame.x=0;return}this._layout.frame.x=this._source.width/t}get frameX(){return this._source.width*this._layout.frame.x}set frameY(t){if(t===0){this._layout.frame.y=0;return}this._layout.frame.y=this._source.height/t}get frameY(){return this._source.height*this._layout.frame.y}get width(){return this._source.width*this._layout.orig.width}get height(){return this._source.height*this._layout.orig.height}destroy(t=!1){this._layout&&(this._layout.destroy(),this._layout=null),this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}onUpdate(){this.emit("update",this)}get baseTexture(){return T(E,"Texture.baseTexture is now Texture.source"),this._source}};w.EMPTY=new w({});w.EMPTY.label="EMPTY";w.EMPTY.destroy=Ut;var ni=class extends ${constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return T(E,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return T(E,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return T(E,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return T(E,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return T(E,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(){this.emit("destroy",this),this.removeAllListeners();for(let t in this.chars)this.chars[t].texture.destroy();this.chars=null}};var Yi={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};function oi(i,t){let e=i.match(/[a-df-z][^a-df-z]*/gi),s=i.match(/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/g)?.map(parseFloat),r=[];e.forEach(a=>{let c=a.match(/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/g)?.map(parseFloat),d=a[0],l=1;c&&(l=c.length/Yi[d.toLowerCase()]);for(let f=0;f<l;f++)r.push(d)});let n=0,o=0,h=0;for(let a=0;a<r.length;a++){let c=r[a];switch(c){case"M":o=s[n++],h=s[n++],t.moveTo(o,h);break;case"m":o+=s[n++],h+=s[n++],t.moveTo(o,h);break;case"H":o=s[n++],t.lineTo(o,h);break;case"h":o+=s[n++],t.lineTo(o,h);break;case"V":h=s[n++],t.lineTo(o,h);break;case"v":h+=s[n++],t.lineTo(o,h);break;case"L":o=s[n++],h=s[n++],t.lineTo(o,h);break;case"l":o+=s[n++],h+=s[n++],t.lineTo(o,h);break;case"C":o=s[n+4],h=s[n+5],t.bezierCurveTo(s[n],s[n+1],s[n+2],s[n+3],o,h),n+=6;break;case"c":t.bezierCurveTo(o+s[n],h+s[n+1],o+s[n+2],h+s[n+3],o+s[n+4],h+s[n+5]),o+=s[n+4],h+=s[n+5],n+=6;break;case"S":o=s[n+2],h=s[n+3],t.bezierCurveToShort(s[n],s[n+1],o,h),n+=4;break;case"s":t.bezierCurveToShort(o+s[n],h+s[n+1],o+s[n+2],h+s[n+3]),o+=s[n+2],h+=s[n+3],n+=4;break;case"Q":o=s[n+2],h=s[n+3],t.quadraticCurveTo(s[n],s[n+1],o,h),n+=4;break;case"q":t.quadraticCurveTo(o+s[n],h+s[n+1],o+s[n+2],h+s[n+3]),o+=s[n+2],h+=s[n+3],n+=4;break;case"T":o=s[n++],h=s[n++],t.quadraticCurveToShort(o,h);break;case"t":o+=s[n++],h+=s[n++],t.quadraticCurveToShort(o,h);break;case"A":o=s[n+5],h=s[n+6],t.arcToSvg(s[n],s[n+1],s[n+2],s[n+3],s[n+4],o,h),n+=7;break;case"a":o+=s[n+5],h+=s[n+6],t.arcToSvg(s[n],s[n+1],s[n+2],s[n+3],s[n+4],o,h),n+=7;break;case"Z":case"z":t.closePath();break;default:W(`Unknown SVG path command: ${c}`)}}return t}var lt=class{constructor(t=0,e=0,s=0){this.type="circle",this.x=t,this.y=e,this.radius=s}clone(){return new lt(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;let s=this.radius*this.radius,r=this.x-t,n=this.y-e;return r*=r,n*=n,r+n<=s}getBounds(t){return t=t||new k,t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}};var dt=class{constructor(t=0,e=0,s=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=s,this.halfHeight=r}clone(){return new dt(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return s*=s,r*=r,s+r<=1}getBounds(){return new k(this.x-this.halfWidth,this.y-this.halfHeight,this.halfWidth*2,this.halfHeight*2)}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}};var J=class{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){let s=[];for(let r=0,n=e.length;r<n;r++)s.push(e[r].x,e[r].y);e=s}this.points=e,this.closePath=!0}clone(){let t=this.points.slice(),e=new J(t);return e.closePath=this.closePath,e}contains(t,e){let s=!1,r=this.points.length/2;for(let n=0,o=r-1;n<r;o=n++){let h=this.points[n*2],a=this.points[n*2+1],c=this.points[o*2],d=this.points[o*2+1];a>e!=d>e&&t<(c-h)*((e-a)/(d-a))+h&&(s=!s)}return s}getBounds(t){t=t||new k;let e=this.points,s=1/0,r=-1/0,n=1/0,o=-1/0;for(let h=0,a=e.length;h<a;h+=2){let c=e[h],d=e[h+1];s=c<s?c:s,r=c>r?c:r,n=d<n?d:n,o=d>o?d:o}return t.x=s,t.width=r-s,t.y=n,t.height=o-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}};var ut=class{constructor(t=0,e=0,s=0,r=0,n=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=s,this.height=r,this.radius=n}getBounds(t){return t=t||new k,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new ut(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){let s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let r=t-(this.x+s),n=e-(this.y+s),o=s*s;if(r*r+n*n<=o||(r=t-(this.x+this.width-s),r*r+n*n<=o)||(n=e-(this.y+this.height-s),r*r+n*n<=o)||(r=t-(this.x+s),r*r+n*n<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}};var Ht=11920929e-14,Di=1,le=.01,ft=0,st=0;function $t(i,t,e,s,r,n,o,h,a){let d=Di/1;return d*=d,Oi(t,e,s,r,n,o,h,a,i,d),i}function Oi(i,t,e,s,r,n,o,h,a,c){de(i,t,e,s,r,n,o,h,a,c,0),a.push(o,h)}function de(i,t,e,s,r,n,o,h,a,c,d){if(d>8)return;let l=Math.PI,f=(i+e)/2,u=(t+s)/2,m=(e+r)/2,_=(s+n)/2,x=(r+o)/2,y=(n+h)/2,p=(f+m)/2,b=(u+_)/2,Y=(m+x)/2,D=(_+y)/2,P=(p+Y)/2,v=(b+D)/2;if(d>0){let M=o-i,A=h-t,H=Math.abs((e-o)*A-(s-h)*M),O=Math.abs((r-o)*A-(n-h)*M),I,j;if(H>Ht&&O>Ht){if((H+O)*(H+O)<=c*(M*M+A*A)){if(ft<le){a.push(P,v);return}let mt=Math.atan2(n-s,r-e);if(I=Math.abs(mt-Math.atan2(s-t,e-i)),j=Math.abs(Math.atan2(h-n,o-r)-mt),I>=l&&(I=2*l-I),j>=l&&(j=2*l-j),I+j<ft){a.push(P,v);return}if(st!==0){if(I>st){a.push(e,s);return}if(j>st){a.push(r,n);return}}}}else if(H>Ht){if(H*H<=c*(M*M+A*A)){if(ft<le){a.push(P,v);return}if(I=Math.abs(Math.atan2(n-s,r-e)-Math.atan2(s-t,e-i)),I>=l&&(I=2*l-I),I<ft){a.push(e,s),a.push(r,n);return}if(st!==0&&I>st){a.push(e,s);return}}}else if(O>Ht){if(O*O<=c*(M*M+A*A)){if(ft<le){a.push(P,v);return}if(I=Math.abs(Math.atan2(h-n,o-r)-Math.atan2(n-s,r-e)),I>=l&&(I=2*l-I),I<ft){a.push(e,s),a.push(r,n);return}if(st!==0&&I>st){a.push(r,n);return}}}else if(M=P-(i+o)/2,A=v-(t+h)/2,M*M+A*A<=c){a.push(P,v);return}}de(i,t,f,u,p,b,P,v,a,c,d+1),de(P,v,Y,D,x,y,o,h,a,c,d+1)}var Xi=11920929e-14,Ui=1,Bi=.01,hi=0;function ai(i,t,e,s,r,n,o){let a=Ui/1;return a*=a,Gi(t,e,s,r,n,o,i,a),i}function Gi(i,t,e,s,r,n,o,h){ue(o,i,t,e,s,r,n,h,0),o.push(r,n)}function ue(i,t,e,s,r,n,o,h,a){if(a>8)return;let c=Math.PI,d=(t+s)/2,l=(e+r)/2,f=(s+n)/2,u=(r+o)/2,m=(d+f)/2,_=(l+u)/2,x=n-t,y=o-e,p=Math.abs((s-n)*y-(r-o)*x);if(p>Xi){if(p*p<=h*(x*x+y*y)){if(hi<Bi){i.push(m,_);return}let b=Math.abs(Math.atan2(o-r,n-s)-Math.atan2(r-e,s-t));if(b>=c&&(b=2*c-b),b<hi){i.push(m,_);return}}}else if(x=m-(t+n)/2,y=_-(e+o)/2,x*x+y*y<=h){i.push(m,_);return}ue(i,t,e,d,l,m,_,h,a+1),ue(i,m,_,f,u,n,o,h,a+1)}function Vt(i,t,e,s,r,n,o,h){let a=Math.abs(r-n);(!o&&r>n||o&&n>r)&&(a=2*Math.PI-a),h=h||Math.max(6,Math.floor(6*Math.pow(s,1/3)*(a/Math.PI))),h=Math.max(h,3);let c=a/h,d=r;c*=o?-1:1;for(let l=0;l<h+1;l++){let f=Math.cos(d),u=Math.sin(d),m=t+f*s,_=e+u*s;i.push(m,_),d+=c}}function ci(i,t,e,s,r,n){let o=i[i.length-2],a=i[i.length-1]-e,c=o-t,d=r-e,l=s-t,f=Math.abs(a*l-c*d);if(f<1e-8||n===0){(i[i.length-2]!==t||i[i.length-1]!==e)&&i.push(t,e);return}let u=a*a+c*c,m=d*d+l*l,_=a*d+c*l,x=n*Math.sqrt(u)/f,y=n*Math.sqrt(m)/f,p=x*_/u,b=y*_/m,Y=x*l+y*c,D=x*d+y*a,P=c*(y+p),v=a*(y+p),M=l*(x+b),A=d*(x+b),H=Math.atan2(v-D,P-Y),O=Math.atan2(A-D,M-Y);Vt(i,Y+t,D+e,n,H,O,c*d>l*a)}var wt=Math.PI*2,fe={centerX:0,centerY:0,ang1:0,ang2:0},pe=({x:i,y:t},e,s,r,n,o,h,a)=>{i*=e,t*=s;let c=r*i-n*t,d=n*i+r*t;return a.x=c+o,a.y=d+h,a};function Hi(i,t){let e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:e,r=Math.cos(i),n=Math.sin(i),o=Math.cos(i+t),h=Math.sin(i+t);return[{x:r-n*s,y:n+r*s},{x:o+h*s,y:h-o*s},{x:o,y:h}]}var li=(i,t,e,s)=>{let r=i*s-t*e<0?-1:1,n=i*e+t*s;return n>1&&(n=1),n<-1&&(n=-1),r*Math.acos(n)},$i=(i,t,e,s,r,n,o,h,a,c,d,l,f)=>{let u=Math.pow(r,2),m=Math.pow(n,2),_=Math.pow(d,2),x=Math.pow(l,2),y=u*m-u*x-m*_;y<0&&(y=0),y/=u*x+m*_,y=Math.sqrt(y)*(o===h?-1:1);let p=y*r/n*l,b=y*-n/r*d,Y=c*p-a*b+(i+e)/2,D=a*p+c*b+(t+s)/2,P=(d-p)/r,v=(l-b)/n,M=(-d-p)/r,A=(-l-b)/n,H=li(1,0,P,v),O=li(P,v,M,A);h===0&&O>0&&(O-=wt),h===1&&O<0&&(O+=wt),f.centerX=Y,f.centerY=D,f.ang1=H,f.ang2=O};function di(i,t,e,s,r,n,o,h=0,a=0,c=0){if(n===0||o===0)return;let d=Math.sin(h*wt/360),l=Math.cos(h*wt/360),f=l*(t-s)/2+d*(e-r)/2,u=-d*(t-s)/2+l*(e-r)/2;if(f===0&&u===0)return;n=Math.abs(n),o=Math.abs(o);let m=Math.pow(f,2)/Math.pow(n,2)+Math.pow(u,2)/Math.pow(o,2);m>1&&(n*=Math.sqrt(m),o*=Math.sqrt(m)),$i(t,e,s,r,n,o,a,c,d,l,f,u,fe);let{ang1:_,ang2:x}=fe,{centerX:y,centerY:p}=fe,b=Math.abs(x)/(wt/4);Math.abs(1-b)<1e-7&&(b=1);let Y=Math.max(Math.ceil(b),1);x/=Y;let D=i[i.length-2],P=i[i.length-1],v={x:0,y:0};for(let M=0;M<Y;M++){let A=Hi(_,x),{x:H,y:O}=pe(A[0],n,o,l,d,y,p,v),{x:I,y:j}=pe(A[1],n,o,l,d,y,p,v),{x:mt,y:xe}=pe(A[2],n,o,l,d,y,p,v);$t(i,D,P,H,O,I,j,mt,xe),D=mt,P=xe,_+=x}}var Vi=new k,Nt=class{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new V,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();let s=this._currentPoly.points,r=s[s.length-2],n=s[s.length-1];return(r!==t||n!==e)&&s.push(t,e),this}arc(t,e,s,r,n,o){this._ensurePoly(!1);let h=this._currentPoly.points;return Vt(h,t,e,s,r,n,o),this}arcTo(t,e,s,r,n){this._ensurePoly();let o=this._currentPoly.points;return ci(o,t,e,s,r,n),this}arcToSvg(t,e,s,r,n,o,h){let a=this._currentPoly.points;return di(a,this._currentPoly.lastX,this._currentPoly.lastY,o,h,t,e,s,r,n),this}bezierCurveTo(t,e,s,r,n,o){this._ensurePoly();let h=this._currentPoly;return $t(this._currentPoly.points,h.lastX,h.lastY,t,e,s,r,n,o),this}quadraticCurveTo(t,e,s,r){this._ensurePoly();let n=this._currentPoly;return ai(this._currentPoly.points,n.lastX,n.lastY,t,e,s,r),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));for(let s=0;s<t.instructions.length;s++){let r=t.instructions[s];this[r.action](...r.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,s,r,n){return this.drawShape(new k(t,e,s,r),n),this}circle(t,e,s,r){return this.drawShape(new lt(t,e,s),r),this}poly(t,e,s){let r=new J(t);r.closePath=e,this.drawShape(r,s)}ellipse(t,e,s,r,n){return this.drawShape(new dt(t,e,s,r),n),this}roundRect(t,e,s,r,n,o){return this.drawShape(new ut(t,e,s,r,n),o),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let s=this._currentPoly;return s&&this.endPoly(),s=new J,s.points.push(t,e),this._currentPoly=s,this}endPoly(t=!1){let e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new J,t)){let e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let s=e.shape.x,r=e.shape.y;if(e.transform.isIdentity()){let n=e.transform,o=s;s=n.a*s+n.c*r+n.tx,r=n.b*o+n.d*r+n.ty}this._currentPoly.points.push(s,s)}else this._currentPoly.points.push(0,0)}}buildPath(){let t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){let s=t.instructions[e];this[s.action](...s.data)}this.finish()}get bounds(){let t=this._bounds;t.clear();let e=this.shapePrimitives;for(let s=0;s<e.length;s++){let r=e[s],n=r.shape.getBounds(Vi);r.transform?(t.pushMatrix(r.transform),t.addRect(n),t.popMatrix()):t.addRect(n)}return t}};var N=class{constructor(t){this.instructions=[],this.uid=R("graphicsPath"),this._dirty=!0,typeof t=="string"?oi(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new Nt(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,s,r){let n=this.instructions[this.instructions.length-1],o=this._getLastPoint(S.shared),h=0,a=0;if(!n||n.action!=="bezierCurveTo")h=o.x,a=o.y;else{h=n.data[2],a=n.data[3];let c=o.x,d=o.y;h=c+(c-h),a=d+(d-a)}return this.instructions.push({action:"bezierCurveTo",data:[h,a,t,e,s,r]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e){let s=this.instructions[this.instructions.length-1],r=this._getLastPoint(S.shared),n=0,o=0;if(!s||s.action!=="quadraticCurveTo")n=r.x,o=r.y;else{n=s.data[0],o=s.data[1];let h=r.x,a=r.y;n=h+(h-n),o=a+(a-o)}return this.instructions.push({action:"quadraticCurveTo",data:[n,o,t,e]}),this._dirty=!0,this}rect(t,e,s,r,n){return this.instructions.push({action:"rect",data:[t,e,s,r,n]}),this._dirty=!0,this}circle(t,e,s,r){return this.instructions.push({action:"circle",data:[t,e,s,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}star(t,e,s,r,n,o=0,h){n=n||r/2;let a=-1*Math.PI/2+o,c=s*2,d=Math.PI*2/c,l=[];for(let f=0;f<c;f++){let u=f%2?n:r,m=f*d+a;l.push(t+u*Math.cos(m),e+u*Math.sin(m))}return this.poly(l,!0,h),this}clone(t=!1){let e=new N;if(!t)e.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){let r=this.instructions[s];e.instructions.push({action:r.action,data:r.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;let e=t.a,s=t.b,r=t.c,n=t.d,o=t.tx,h=t.ty,a=0,c=0,d=0,l=0,f=0,u=0,m=0,_=0;for(let x=0;x<this.instructions.length;x++){let y=this.instructions[x],p=y.data;switch(y.action){case"moveTo":case"lineTo":a=p[0],c=p[1],p[0]=e*a+r*c+o,p[1]=s*a+n*c+h;break;case"bezierCurveTo":d=p[0],l=p[1],f=p[2],u=p[3],a=p[4],c=p[5],p[0]=e*d+r*l+o,p[1]=s*d+n*l+h,p[2]=e*f+r*u+o,p[3]=s*f+n*u+h,p[4]=e*a+r*c+o,p[5]=s*a+n*c+h;break;case"quadraticCurveTo":d=p[0],l=p[1],a=p[2],c=p[3],p[0]=e*d+r*l+o,p[1]=s*d+n*l+h,p[2]=e*a+r*c+o,p[3]=s*a+n*c+h;break;case"arcToSvg":a=p[5],c=p[6],m=p[0],_=p[1],p[0]=e*m+r*_,p[1]=s*m+n*_,p[5]=e*a+r*c+o,p[6]=s*a+n*c+h;break;case"rect":p[4]=me(p[4],t);break;case"ellipse":p[8]=me(p[8],t);break;case"roundRect":p[5]=me(p[5],t);break;case"addPath":p[0].transform(t);break;default:W("unknown transform action",y.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}_getLastPoint(t){let e=this.instructions.length-1,s=this.instructions[e];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;s=this.instructions[e]}let r,n,o;switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":t.x=s.data[0].lastX,t.y=s.data[2].lastY;break;case"rect":if(o=s.data[4],r=s.data[0],n=s.data[1],o){let{a:h,b:a,c,d,tx:l,ty:f}=o;t.x=h*r+c*n+l,t.y=a*r+d*n+f}else t.x=r,t.y=n;break;default:W(`${s.action} is not supported yet`);break}return t}};function me(i,t){return i?i.prepend(t):t.clone()}function ui(i,t){if(typeof i=="string"){let s=document.createElement("div");s.innerHTML=i.trim(),i=s.querySelector("svg")}let e={context:t,path:new N};return fi(i,e,null,null),t}function fi(i,t,e,s){let r=i.children,{fillStyle:n,strokeStyle:o}=Ni(i);n&&e?e={...e,...n}:n&&(e=n),o&&s?s={...s,...o}:o&&(s=o),t.context.fillStyle=e,t.context.strokeStyle=s;let h,a,c,d,l,f,u,m,_,x,y,p,b,Y,D,P,v;switch(i.nodeName.toLowerCase()){case"path":Y=i.getAttribute("d"),D=new N(Y),t.context.path(D),e&&t.context.fill(),s&&t.context.stroke();break;case"circle":u=L(i,"cx",0),m=L(i,"cy",0),_=L(i,"r",0),t.context.ellipse(u,m,_,_),e&&t.context.fill(),s&&t.context.stroke();break;case"rect":h=L(i,"x",0),a=L(i,"y",0),P=L(i,"width",0),v=L(i,"height",0),x=L(i,"rx",0),y=L(i,"ry",0),x||y?t.context.roundRect(h,a,P,v,x||y):t.context.rect(h,a,P,v),e&&t.context.fill(),s&&t.context.stroke();break;case"ellipse":u=L(i,"cx",0),m=L(i,"cy",0),x=L(i,"rx",0),y=L(i,"ry",0),t.context.beginPath(),t.context.ellipse(u,m,x,y),e&&t.context.fill(),s&&t.context.stroke();break;case"line":c=L(i,"x1",0),d=L(i,"y1",0),l=L(i,"x2",0),f=L(i,"y2",0),t.context.beginPath(),t.context.moveTo(c,d),t.context.lineTo(l,f),s&&t.context.stroke();break;case"polygon":b=i.getAttribute("points"),p=b.match(/\d+/g).map(M=>parseInt(M,10)),t.context.poly(p,!0),e&&t.context.fill(),s&&t.context.stroke();break;case"polyline":b=i.getAttribute("points"),p=b.match(/\d+/g).map(M=>parseInt(M,10)),t.context.poly(p,!1),s&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}for(let M=0;M<r.length;M++)fi(r[M],t,e,s)}function L(i,t,e){let s=i.getAttribute(t);return s?Number(s):e}function Ni(i){let t=i.getAttribute("style"),e={},s={},r=!1,n=!1;if(t){let o=t.split(";");for(let h=0;h<o.length;h++){let a=o[h],[c,d]=a.split(":");switch(c){case"stroke":d!=="none"&&(e.color=F.shared.setValue(d).toNumber(),n=!0);break;case"stroke-width":e.width=Number(d);break;case"fill":d!=="none"&&(r=!0,s.color=F.shared.setValue(d).toNumber());break;case"fill-opacity":s.alpha=Number(d);break;case"stroke-opacity":e.alpha=Number(d);break;case"opacity":s.alpha=Number(d),e.alpha=Number(d);break}}}else{let o=i.getAttribute("stroke");o&&o!=="none"&&(n=!0,e.color=F.shared.setValue(o).toNumber(),e.width=L(i,"stroke-width",1));let h=i.getAttribute("fill");h&&h!=="none"&&(r=!0,s.color=F.shared.setValue(h).toNumber())}return{strokeStyle:n?e:null,fillStyle:r?s:null}}var Mt=class extends z{constructor(){super(...arguments),this.uploadMethodId="image"}},Wt=Ot.ADAPTER.createCanvas(),rt=1;Wt.width=rt;Wt.height=rt;var q=Wt.getContext("2d");q.fillStyle="#ffffff";q.fillRect(0,0,rt,rt);q.beginPath();q.moveTo(0,0);q.lineTo(rt,0);q.lineTo(rt,rt);q.closePath();q.fillStyle="#ffffff";q.fill();w.WHITE=new w({source:new Mt({resource:Wt})});w.WHITE.label="WHITE";w.WHITE.destroy=Ut;var ye=class{constructor(i,t,e,s){this.uid=R("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=i,this.y0=t,this.x1=e,this.y1=s}addColorStop(i,t){return this.gradientStops.push({offset:i,color:F.shared.setValue(t).toHex()}),this}buildLinearGradient(){let i=ye.defaultTextureSize,{gradientStops:t}=this,e=Ot.ADAPTER.createCanvas();e.width=i,e.height=i;let s=e.getContext("2d"),r=s.createLinearGradient(0,0,ye.defaultTextureSize,1);for(let m=0;m<t.length;m++){let _=t[m];r.addColorStop(_.offset,_.color)}s.fillStyle=r,s.fillRect(0,0,i,i),this.texture=new w({source:new Mt({resource:e,style:{addressModeU:"clamp-to-edge",addressModeV:"repeat"}})});let{x0:n,y0:o,x1:h,y1:a}=this,c=new g,d=h-n,l=a-o,f=Math.sqrt(d*d+l*l),u=Math.atan2(l,d);c.translate(-n,-o),c.scale(1/i,1/i),c.rotate(-u),c.scale(256/f,1),this.transform=c}},_e=ye;_e.defaultTextureSize=256;var pi={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},zt=class{constructor(t,e){this.uid=R("fillPattern"),this.transform=new g,this.texture=t,this.transform.scale(1/t.frameWidth,1/t.frameHeight),e&&(t.source.style.addressModeU=pi[e].addressModeU,t.source.style.addressModeV=pi[e].addressModeV)}setTransform(t){let e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frameWidth,1/e.frameHeight)}};function vt(i,t){if(!i)return null;let e,s;if(i?.fill?(s=i.fill,e={...t,...i}):(s=i,e=t),F.isColorLike(s)){let n=F.shared.setValue(s??0);return{...e,color:n.toNumber(),alpha:e.alpha??n.alpha,texture:w.WHITE}}else if(s instanceof zt){let n=s;return{...e,color:16777215,texture:n.texture,matrix:n.transform,fill:e.fill??null}}else if(s instanceof _e){let n=s;return n.buildLinearGradient(),{...e,color:16777215,texture:n.texture,matrix:n.transform}}let r={...t,...i};if(r.texture!==w.WHITE){let n=r.matrix||new g;n.scale(1/r.texture.frameWidth,1/r.texture.frameHeight),r.matrix=n,r.color=16777215}return r.color=F.shared.setValue(r.color).toNumber(),r}var pt=new S,mi=new g,nt=class extends ${constructor(){super(...arguments),this.uid=R("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new N,this._transform=new g,this._fillStyle={...nt.defaultFillStyle},this._strokeStyle={...nt.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new V,this._boundsDirty=!0}get fillStyle(){return this._fillStyle}set fillStyle(i){this._fillStyle=vt(i,nt.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(i){this._strokeStyle=vt(i,nt.defaultStrokeStyle)}texture(i,t,e,s,r,n){return this.instructions.push({action:"texture",data:{image:i,dx:e||0,dy:s||0,dw:r||i.frameWidth,dh:n||i.frameHeight,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?F.shared.setValue(t).toNumber():0}}),this.onUpdate(),this}beginPath(){return this._activePath=new N,this}fill(i,t){let e,s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?e=s.data.path:e=this._activePath.clone(),e?(i&&(t!==void 0&&typeof i=="number"&&(T("8.0.0","GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),i={color:i,alpha:t}),this.fillStyle=vt(i,nt.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:e}}),this.onUpdate(),this._activePath.instructions.length=0,this._tick=0,this):this}stroke(i){let t,e=this.instructions[this.instructions.length-1];return this._tick===0&&e&&e.action==="fill"?t=e.data.path:t=this._activePath.clone(),t?(i&&(this.strokeStyle=vt(i,nt.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._activePath.instructions.length=0,this._tick=0,this):this}cut(){for(let i=0;i<2;i++){let t=this.instructions[this.instructions.length-1-i],e=this._activePath.clone();t&&(t.action==="stroke"||t.action==="fill")&&(t.data.hole=e)}return this._activePath.instructions.length=0,this}arc(i,t,e,s,r,n){this._tick++;let o=this._transform;return this._activePath.arc(o.a*i+o.c*t+o.tx,o.b*i+o.d*t+o.ty,e,s,r,n),this}arcTo(i,t,e,s,r){this._tick++;let n=this._transform;return this._activePath.arcTo(n.a*i+n.c*t+n.tx,n.b*i+n.d*t+n.ty,n.a*e+n.c*s+n.tx,n.b*e+n.d*s+n.ty,r),this}arcToSvg(i,t,e,s,r,n,o){this._tick++;let h=this._transform;return this._activePath.arcToSvg(i,t,e,s,r,h.a*n+h.c*o+h.tx,h.b*n+h.d*o+h.ty),this}bezierCurveTo(i,t,e,s,r,n){this._tick++;let o=this._transform;return this._activePath.bezierCurveTo(o.a*i+o.c*t+o.tx,o.b*i+o.d*t+o.ty,o.a*e+o.c*s+o.tx,o.b*e+o.d*s+o.ty,o.a*r+o.c*n+o.tx,o.b*r+o.d*n+o.ty),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(i,t,e,s){return this._tick++,this._activePath.ellipse(i,t,e,s,this._transform.clone()),this}circle(i,t,e){return this._tick++,this._activePath.circle(i,t,e,this._transform.clone()),this}path(i){return this._tick++,this._activePath.addPath(i,this._transform.clone()),this}lineTo(i,t){this._tick++;let e=this._transform;return this._activePath.lineTo(e.a*i+e.c*t+e.tx,e.b*i+e.d*t+e.ty),this}moveTo(i,t){this._tick++;let e=this._transform;return this._activePath.moveTo(e.a*i+e.c*t+e.tx,e.b*i+e.d*t+e.ty),this}quadraticCurveTo(i,t,e,s){this._tick++;let r=this._transform;this._activePath.quadraticCurveTo(r.a*i+r.c*t+r.tx,r.b*i+r.d*t+r.ty,r.a*e+r.c*s+r.tx,r.b*e+r.d*s+r.ty)}rect(i,t,e,s){return this._tick++,this._activePath.rect(i,t,e,s,this._transform.clone()),this}roundRect(i,t,e,s,r){return this._tick++,this._activePath.roundRect(i,t,e,s,r,this._transform.clone()),this}poly(i,t){return this._tick++,this._activePath.poly(i,t,this._transform.clone()),this}star(i,t,e,s,r,n){return this._tick++,this._activePath.star(i,t,e,s,r,n,this._transform.clone()),this}svg(i){this._tick++,ui(i,this)}restore(){let i=this._stateStack.pop();i&&(this._transform=i.transform,this._fillStyle=i.fillStyle,this._strokeStyle=i.strokeStyle)}save(){this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}})}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(i){return this._transform.rotate(i),this}scale(i,t=i){return this._transform.scale(i,t),this}setTransform(i,t,e,s,r,n){return i instanceof g?(this._transform.set(i.a,i.b,i.c,i.d,i.tx,i.ty),this):(this._transform.set(i,t,e,s,r,n),this)}transform(i,t,e,s,r,n){return i instanceof g?(this._transform.append(i),this):(mi.set(i,t,e,s,r,n),this._transform.append(mi),this)}translate(i,t){return this._transform.translate(i,t),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let i=this._bounds;i.clear();for(let t=0;t<this.instructions.length;t++){let e=this.instructions[t],s=e.action;if(s==="fill"){let r=e.data;i.addBounds(r.path.bounds)}else if(s==="texture"){let r=e.data;i.pushMatrix(r.transform),i.addFrame(r.dx,r.dy,r.dx+r.dw,r.dy+r.dh),i.popMatrix()}}return i}containsPoint(i){let t=this.instructions,e=!1;return t.forEach(s=>{let r=s.data,n=r.path;if(!s.action||!n)return;let o=r.style,h=n.shapePath?.shapePrimitives;this._forEachShape(h,a=>{if(!o||!a)return;typeof o!="number"&&o.matrix?o.matrix.applyInverse(i,pt):pt.copyFrom(i),e=a.contains(pt.x,pt.y);let c=r.hole;if(!c)return;let d=c.shapePath?.shapePrimitives;!d||this._forEachShape(d,l=>{l.contains(pt.x,pt.y)&&(e=!1)})})}),e}_forEachShape(i,t){i?.forEach(e=>{let s=e?.shape;s&&t(s)})}destroy(i=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof i=="boolean"?i:i?.texture){let e=typeof i=="boolean"?i:i?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(e),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(e)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}},yi=nt;yi.defaultFillStyle={color:0,alpha:1,texture:w.WHITE,matrix:null,fill:null};yi.defaultStrokeStyle={width:1,color:0,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:w.WHITE,matrix:null,fill:null};var _i={onViewUpdate:()=>{}};function xi(i,t,e,s){let r=e._source,n=e.layout,o=n.orig,h=n.trim,a=r.width,c=r.height,d=a*o.width,l=c*o.height;if(h){let f=a*h.width,u=c*h.height;i[0]=h.x*a-t._x*d-s,i[1]=i[0]+f,i[2]=h.y*c-t._y*l-s,i[3]=i[2]+u}else i[0]=-t._x*d-s,i[1]=i[0]+d,i[2]=-t._y*l-s,i[3]=i[2]+l}var qt=class{constructor(t){this.renderPipeId="sprite",this.owner=_i,this.uid=R("spriteView"),this.batched=!0,this._didUpdate=!1,this._bounds=[0,1,0,0],this._sourceBounds=[0,1,0,0],this._boundsDirty=!0,this._sourceBoundsDirty=!0,this.roundPixels=0,this.anchor=new U(this,t.layout.defaultAnchor?.x||0,t.layout.defaultAnchor?.y||0),this.texture=t}set texture(t){t||(t=w.EMPTY),this._texture!==t&&(this._texture&&this._texture.off("update",this.onUpdate,this),t.on("update",this.onUpdate,this),this._texture=t,this.onUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){let e=this._texture.frameWidth,s=this._texture.frameHeight,r=-e*this.anchor.x,n=0;return t.x>=r&&t.x<r+e&&(n=-s*this.anchor.y,t.y>=n&&t.y<n+s)}addBounds(t){if(this._texture._layout.trim){let s=this.sourceBounds;t.addFrame(s[0],s[2],s[1],s[3])}else{let s=this.bounds;t.addFrame(s[0],s[2],s[1],s[3])}}onUpdate(){this._didUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,this.owner.onViewUpdate()}_updateBounds(){xi(this._bounds,this.anchor,this._texture,0)}_updateSourceBounds(){let t=this.anchor,e=this._texture,s=e._source,n=e.layout.orig,o=this._sourceBounds,h=s.width*n.width,a=s.height*n.height;o[1]=-t._x*h,o[0]=o[1]+h,o[3]=-t._y*a,o[2]=o[3]+a}destroy(t=!1){if(this.anchor=null,typeof t=="boolean"?t:t?.texture){let s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._texture=null,this._bounds=null,this._sourceBounds=null}};var Tt=class extends G{static from(t){return typeof t=="string"?new Tt(Xt.get(t)):new Tt(t)}constructor(t=w.EMPTY){t instanceof w&&(t={texture:t});let{texture:e,...s}=t;super({view:new qt(e??w.EMPTY),label:"Sprite",...s}),this.allowChildren=!1}get anchor(){return this.view.anchor}set anchor(t){this.view.anchor.x=t.x,this.view.anchor.y=t.y}get texture(){return this.view.texture}set texture(t){this.view.texture=t}get roundPixels(){return!!this.view.roundPixels}set roundPixels(t){this.view.roundPixels=t?1:0}};export{S as a,at as b,ot as c,Pt as d,$ as e,F as f,g,R as h,E as i,T as j,te as k,ie as l,k as m,V as n,K as o,Ye as p,W as q,ht as r,Rt as s,Ne as t,Pi as u,We as v,G as w,Je as x,Dt as y,Ot as z,ei as A,Xt as B,qe as C,Lt as D,z as E,Gt as F,w as G,ni as H,J as I,Mt as J,_e as K,zt as L,vt as M,yi as N,_i as O,xi as P,Tt as Q};
