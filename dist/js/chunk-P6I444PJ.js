var is=Object.create;var Ye=Object.defineProperty;var ss=Object.getOwnPropertyDescriptor;var rs=Object.getOwnPropertyNames;var ns=Object.getPrototypeOf,os=Object.prototype.hasOwnProperty;var hs=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var as=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of rs(t))!os.call(e,r)&&r!==i&&Ye(e,r,{get:()=>t[r],enumerable:!(s=ss(t,r))||s.enumerable});return e};var ls=(e,t,i)=>(i=e!=null?is(ns(e)):{},as(t||!e||!e.__esModule?Ye(i,"default",{value:e,enumerable:!0}):i,e));var ti=hs((lr,me)=>{"use strict";var bs=Object.prototype.hasOwnProperty,G="~";function Mt(){}Object.create&&(Mt.prototype=Object.create(null),new Mt().__proto__||(G=!1));function xs(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function Qe(e,t,i,s,r){if(typeof i!="function")throw new TypeError("The listener must be a function");var n=new xs(i,s||e,r),o=G?G+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],n]:e._events[o].push(n):(e._events[o]=n,e._eventsCount++),e}function Dt(e,t){--e._eventsCount===0?e._events=new Mt:delete e._events[t]}function U(){this._events=new Mt,this._eventsCount=0}U.prototype.eventNames=function(){var t=[],i,s;if(this._eventsCount===0)return t;for(s in i=this._events)bs.call(i,s)&&t.push(G?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(i)):t};U.prototype.listeners=function(t){var i=G?G+t:t,s=this._events[i];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,n=s.length,o=new Array(n);r<n;r++)o[r]=s[r].fn;return o};U.prototype.listenerCount=function(t){var i=G?G+t:t,s=this._events[i];return s?s.fn?1:s.length:0};U.prototype.emit=function(t,i,s,r,n,o){var h=G?G+t:t;if(!this._events[h])return!1;var a=this._events[h],l=arguments.length,d,c;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,i),!0;case 3:return a.fn.call(a.context,i,s),!0;case 4:return a.fn.call(a.context,i,s,r),!0;case 5:return a.fn.call(a.context,i,s,r,n),!0;case 6:return a.fn.call(a.context,i,s,r,n,o),!0}for(c=1,d=new Array(l-1);c<l;c++)d[c-1]=arguments[c];a.fn.apply(a.context,d)}else{var f=a.length,u;for(c=0;c<f;c++)switch(a[c].once&&this.removeListener(t,a[c].fn,void 0,!0),l){case 1:a[c].fn.call(a[c].context);break;case 2:a[c].fn.call(a[c].context,i);break;case 3:a[c].fn.call(a[c].context,i,s);break;case 4:a[c].fn.call(a[c].context,i,s,r);break;default:if(!d)for(u=1,d=new Array(l-1);u<l;u++)d[u-1]=arguments[u];a[c].fn.apply(a[c].context,d)}}return!0};U.prototype.on=function(t,i,s){return Qe(this,t,i,s,!1)};U.prototype.once=function(t,i,s){return Qe(this,t,i,s,!0)};U.prototype.removeListener=function(t,i,s,r){var n=G?G+t:t;if(!this._events[n])return this;if(!i)return Dt(this,n),this;var o=this._events[n];if(o.fn)o.fn===i&&(!r||o.once)&&(!s||o.context===s)&&Dt(this,n);else{for(var h=0,a=[],l=o.length;h<l;h++)(o[h].fn!==i||r&&!o[h].once||s&&o[h].context!==s)&&a.push(o[h]);a.length?this._events[n]=a.length===1?a[0]:a:Dt(this,n)}return this};U.prototype.removeAllListeners=function(t){var i;return t?(i=G?G+t:t,this._events[i]&&Dt(this,i)):(this._events=new Mt,this._eventsCount=0),this};U.prototype.off=U.prototype.removeListener;U.prototype.addListener=U.prototype.on;U.prefixed=G;U.EventEmitter=U;typeof me<"u"&&(me.exports=U)});var dt=(e=>(e.Renderer="renderer",e.Application="application",e.WebGLPipes="webgl-pipes",e.WebGLPipesAdaptor="webgl-pipes-adaptor",e.WebGLSystem="webgl-system",e.WebGPUPipes="webgpu-pipes",e.WebGPUPipesAdaptor="webgpu-pipes-adaptor",e.WebGPUSystem="webgpu-system",e.CanvasSystem="canvas-system",e.CanvasPipesAdaptor="canvas-pipes-adaptor",e.CanvasPipes="canvas-pipes",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e.MaskEffect="mask-effect",e))(dt||{}),ne=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},Ft=(e,t)=>ne(e).priority??t,Lt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(ne).forEach(t=>{t.type.forEach(i=>this._removeHandlers[i]?.(t))}),this},add(...e){return e.map(ne).forEach(t=>{t.type.forEach(i=>{let s=this._addHandlers,r=this._queue;s[i]?s[i](t):(r[i]=r[i]||[],r[i].push(t))})}),this},handle(e,t,i){let s=this._addHandlers,r=this._removeHandlers;if(s[e]||r[e])throw new Error(`Extension type ${e} already has a handler`);s[e]=t,r[e]=i;let n=this._queue;return n[e]&&(n[e].forEach(o=>t(o)),delete n[e]),this},handleByMap(e,t){return this.handle(e,i=>{t[i.name]=i.ref},i=>{delete t[i.name]})},handleByNamedList(e,t,i=-1){return this.handle(e,s=>{t.findIndex(n=>n.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((n,o)=>Ft(o.value,i)-Ft(n.value,i)))},s=>{let r=t.findIndex(n=>n.name===s.name);r!==-1&&t.splice(r,1)})},handleByList(e,t,i=-1){return this.handle(e,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((r,n)=>Ft(n,i)-Ft(r,i)))},s=>{let r=t.indexOf(s.ref);r!==-1&&t.splice(r,1)})}};var cs={grad:.9,turn:360,rad:360/(2*Math.PI)},j=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},F=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},W=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),e>i?i:e>t?e:t},$e=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Oe=function(e){return{r:W(e.r,0,255),g:W(e.g,0,255),b:W(e.b,0,255),a:W(e.a)}},oe=function(e){return{r:F(e.r),g:F(e.g),b:F(e.b),a:F(e.a,3)}},ds=/^#([0-9a-f]{3,8})$/i,Yt=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Ne=function(e){var t=e.r,i=e.g,s=e.b,r=e.a,n=Math.max(t,i,s),o=n-Math.min(t,i,s),h=o?n===t?(i-s)/o:n===i?2+(s-t)/o:4+(t-i)/o:0;return{h:60*(h<0?h+6:h),s:n?o/n*100:0,v:n/255*100,a:r}},Ve=function(e){var t=e.h,i=e.s,s=e.v,r=e.a;t=t/360*6,i/=100,s/=100;var n=Math.floor(t),o=s*(1-i),h=s*(1-(t-n)*i),a=s*(1-(1-t+n)*i),l=n%6;return{r:255*[s,h,o,o,a,s][l],g:255*[a,s,s,h,o,o][l],b:255*[o,o,a,s,s,h][l],a:r}},Be=function(e){return{h:$e(e.h),s:W(e.s,0,100),l:W(e.l,0,100),a:W(e.a)}},De=function(e){return{h:F(e.h),s:F(e.s),l:F(e.l),a:F(e.a,3)}},Ue=function(e){return Ve((i=(t=e).s,{h:t.h,s:(i*=((s=t.l)<50?s:100-s)/100)>0?2*i/(s+i)*100:0,v:s+i,a:t.a}));var t,i,s},vt=function(e){return{h:(t=Ne(e)).h,s:(r=(200-(i=t.s))*(s=t.v)/100)>0&&r<200?i*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,i,s,r},us=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fs=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ps=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ms=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,le={string:[[function(e){var t=ds.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?F(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?F(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=ps.exec(e)||ms.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Oe({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=us.exec(e)||fs.exec(e);if(!t)return null;var i,s,r=Be({h:(i=t[1],s=t[2],s===void 0&&(s="deg"),Number(i)*(cs[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ue(r)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,s=e.b,r=e.a,n=r===void 0?1:r;return j(t)&&j(i)&&j(s)?Oe({r:Number(t),g:Number(i),b:Number(s),a:Number(n)}):null},"rgb"],[function(e){var t=e.h,i=e.s,s=e.l,r=e.a,n=r===void 0?1:r;if(!j(t)||!j(i)||!j(s))return null;var o=Be({h:Number(t),s:Number(i),l:Number(s),a:Number(n)});return Ue(o)},"hsl"],[function(e){var t=e.h,i=e.s,s=e.v,r=e.a,n=r===void 0?1:r;if(!j(t)||!j(i)||!j(s))return null;var o=function(h){return{h:$e(h.h),s:W(h.s,0,100),v:W(h.v,0,100),a:W(h.a)}}({h:Number(t),s:Number(i),v:Number(s),a:Number(n)});return Ve(o)},"hsv"]]},Xe=function(e,t){for(var i=0;i<t.length;i++){var s=t[i][0](e);if(s)return[s,t[i][1]]}return[null,void 0]},ys=function(e){return typeof e=="string"?Xe(e.trim(),le.string):typeof e=="object"&&e!==null?Xe(e,le.object):[null,void 0]};var he=function(e,t){var i=vt(e);return{h:i.h,s:W(i.s+100*t,0,100),l:i.l,a:i.a}},ae=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Ge=function(e,t){var i=vt(e);return{h:i.h,s:i.s,l:W(i.l+100*t,0,100),a:i.a}},ce=function(){function e(t){this.parsed=ys(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return F(ae(this.rgba),2)},e.prototype.isDark=function(){return ae(this.rgba)<.5},e.prototype.isLight=function(){return ae(this.rgba)>=.5},e.prototype.toHex=function(){return t=oe(this.rgba),i=t.r,s=t.g,r=t.b,o=(n=t.a)<1?Yt(F(255*n)):"","#"+Yt(i)+Yt(s)+Yt(r)+o;var t,i,s,r,n,o},e.prototype.toRgb=function(){return oe(this.rgba)},e.prototype.toRgbString=function(){return t=oe(this.rgba),i=t.r,s=t.g,r=t.b,(n=t.a)<1?"rgba("+i+", "+s+", "+r+", "+n+")":"rgb("+i+", "+s+", "+r+")";var t,i,s,r,n},e.prototype.toHsl=function(){return De(vt(this.rgba))},e.prototype.toHslString=function(){return t=De(vt(this.rgba)),i=t.h,s=t.s,r=t.l,(n=t.a)<1?"hsla("+i+", "+s+"%, "+r+"%, "+n+")":"hsl("+i+", "+s+"%, "+r+"%)";var t,i,s,r,n},e.prototype.toHsv=function(){return t=Ne(this.rgba),{h:F(t.h),s:F(t.s),v:F(t.v),a:F(t.a,3)};var t},e.prototype.invert=function(){return z({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),z(he(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),z(he(this.rgba,-t))},e.prototype.grayscale=function(){return z(he(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),z(Ge(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),z(Ge(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?z({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):F(this.rgba.a,3);var i},e.prototype.hue=function(t){var i=vt(this.rgba);return typeof t=="number"?z({h:t,s:i.s,l:i.l,a:i.a}):F(i.h)},e.prototype.isEqual=function(t){return this.toHex()===z(t).toHex()},e}(),z=function(e){return e instanceof ce?e:new ce(e)},He=[],We=function(e){e.forEach(function(t){He.indexOf(t)<0&&(t(ce,le),He.push(t))})};function ze(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in i)s[i[r]]=r;var n={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,a,l=s[this.toHex()];if(l)return l;if(o?.closest){var d=this.toRgb(),c=1/0,f="black";if(!n.length)for(var u in i)n[u]=new e(i[u]).toRgb();for(var m in i){var y=(h=d,a=n[m],Math.pow(h.r-a.r,2)+Math.pow(h.g-a.g,2)+Math.pow(h.b-a.b,2));y<c&&(c=y,f=m)}return f}},t.string.push([function(o){var h=o.toLowerCase(),a=h==="transparent"?"#0000":i[h];return a?new e(a).toRgb():null},"name"])}We([ze]);var st=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof st)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._normalize(e),this._value=this._cloneSource(e))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){let i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((r,n)=>r===t[n]);if(e!==null&&t!==null){let r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(o=>e[o]===t[o])}return e===t}toRgba(){let[e,t,i,s]=this._components;return{r:e,g:t,b:i,a:s}}toRgb(){let[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){let[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){let[t,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb,e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e=e||this._arrayRgba;let[t,i,s,r]=this._components;return e[0]=t,e[1]=i,e[2]=s,e[3]=r,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e=e||this._arrayRgb;let[t,i,s]=this._components;return e[0]=t,e[1]=i,e[2]=s,e}toNumber(){return this._int}toBgrNumber(){let[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,i,s,r]=st._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,r=this._int&255;return t&&(i=i*e+.5|0,s=s*e+.5|0,r=r*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+r}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,i,s,r;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let n=e;t=(n>>16&255)/255,i=(n>>8&255)/255,s=(n&255)/255,r=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,s,r=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,s,r=255]=e,t/=255,i/=255,s/=255,r/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let o=st.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}let n=z(e);n.isValid()&&({r:t,g:i,b:s,a:r}=n.rgba,t/=255,i/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=s,this._components[3]=r,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);let[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((s,r)=>{e[r]=Math.min(Math.max(s,t),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof st||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}},L=st;L.shared=new st;L._temp=new st;L.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var qe=Math.PI*2,je=180/Math.PI,Ke=Math.PI/180;var k=class{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new k(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}static get shared(){return de.x=0,de.y=0,de}},de=new k;var b=class{constructor(t=1,i=0,s=0,r=1,n=0,o=0){this.array=null,this.a=t,this.b=i,this.c=s,this.d=r,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,s,r,n,o){return this.a=t,this.b=i,this.c=s,this.d=r,this.tx=n,this.ty=o,this}toArray(t,i){this.array||(this.array=new Float32Array(9));let s=i||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,i){i=i||new k;let s=t.x,r=t.y;return i.x=this.a*s+this.c*r+this.tx,i.y=this.b*s+this.d*r+this.ty,i}applyInverse(t,i){i=i||new k;let s=this.a,r=this.b,n=this.c,o=this.d,h=this.tx,a=this.ty,l=1/(s*o+n*-r),d=t.x,c=t.y;return i.x=o*l*d+-n*l*c+(a*n-h*o)*l,i.y=s*l*c+-r*l*d+(-a*s+h*r)*l,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){let i=Math.cos(t),s=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*i-this.b*s,this.b=r*s+this.b*i,this.c=n*i-this.d*s,this.d=n*s+this.d*i,this.tx=o*i-this.ty*s,this.ty=o*s+this.ty*i,this}append(t){let i=this.a,s=this.b,r=this.c,n=this.d;return this.a=t.a*i+t.b*r,this.b=t.a*s+t.b*n,this.c=t.c*i+t.d*r,this.d=t.c*s+t.d*n,this.tx=t.tx*i+t.ty*r+this.tx,this.ty=t.tx*s+t.ty*n+this.ty,this}appendFrom(t,i){let s=t.a,r=t.b,n=t.c,o=t.d,h=t.tx,a=t.ty,l=i.a,d=i.b,c=i.c,f=i.d;return this.a=s*l+r*c,this.b=s*d+r*f,this.c=n*l+o*c,this.d=n*d+o*f,this.tx=h*l+a*c+i.tx,this.ty=h*d+a*f+i.ty,this}setTransform(t,i,s,r,n,o,h,a,l){return this.a=Math.cos(h+l)*n,this.b=Math.sin(h+l)*n,this.c=-Math.sin(h-a)*o,this.d=Math.cos(h-a)*o,this.tx=t-(s*this.a+r*this.c),this.ty=i-(s*this.b+r*this.d),this}prepend(t){let i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){let s=this.a,r=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){let i=this.a,s=this.b,r=this.c,n=this.d,o=t.pivot,h=-Math.atan2(-r,n),a=Math.atan2(s,i),l=Math.abs(h+a);return l<1e-5||Math.abs(qe-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=a),t.scale.x=Math.sqrt(i*i+s*s),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*i+o.y*r),t.position.y=this.ty+(o.x*s+o.y*n),t}invert(){let t=this.a,i=this.b,s=this.c,r=this.d,n=this.tx,o=t*r-i*s;return this.a=r/o,this.b=-i/o,this.c=-s/o,this.d=t/o,this.tx=(s*this.ty-r*n)/o,this.ty=-(t*this.ty-i*n)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let t=new b;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return _s.identity()}static get shared(){return gs.identity()}},gs=new b,_s=new b;var Je={},E="8.0.0";function T(e,t,i=3){if(Je[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(s=s.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(s))),Je[t]=!0}var Ot=class{constructor(t,i){this._pool=[],this._count=0,this._index=0,this._classType=t,i&&this.prepopulate(i)}prepopulate(t){for(let i=0;i<t;i++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,i.init?.(t),i}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._pool.length}get totalUsed(){return this._count-this._pool.length}};var ue=class{constructor(){this._poolsByClass=new Map}prepopulate(t,i){this.getPool(t).prepopulate(i)}get(t,i){return this.getPool(t).get(i)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Ot(t)),this._poolsByClass.get(t)}stats(){let t={};return this._poolsByClass.forEach(i=>{let s=t[i._classType.name]?i._classType.name+i._classType.ID:i._classType.name;t[s]={free:i.totalFree,used:i.totalUsed,size:i.totalSize}}),t}},fe=new ue;var Bt=[new k,new k,new k,new k],S=class{constructor(t=0,i=0,s=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(i),this.width=Number(s),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new S(0,0,0,0)}clone(){return new S(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){let v=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=v)return!1;let $=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>$}let s=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=s||o<=n)return!1;let h=Bt[0].set(t.left,t.top),a=Bt[1].set(t.left,t.bottom),l=Bt[2].set(t.right,t.top),d=Bt[3].set(t.right,t.bottom);if(l.x<=h.x||a.y<=h.y)return!1;let c=Math.sign(i.a*i.d-i.b*i.c);if(c===0||(i.apply(h,h),i.apply(a,a),i.apply(l,l),i.apply(d,d),Math.max(h.x,a.x,l.x,d.x)<=s||Math.min(h.x,a.x,l.x,d.x)>=r||Math.max(h.y,a.y,l.y,d.y)<=n||Math.min(h.y,a.y,l.y,d.y)>=o))return!1;let f=c*(a.y-h.y),u=c*(h.x-a.x),m=f*s+u*n,y=f*r+u*n,_=f*s+u*o,g=f*r+u*o;if(Math.max(m,y,_,g)<=f*h.x+u*h.y||Math.min(m,y,_,g)>=f*d.x+u*d.y)return!1;let p=c*(h.y-l.y),x=c*(l.x-h.x),O=p*s+x*n,B=p*r+x*n,P=p*s+x*o,M=p*r+x*o;return!(Math.max(O,B,P,M)<=p*h.x+x*h.y||Math.min(O,B,P,M)>=p*d.x+x*d.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){let i=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(s-i,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,i=.001){let s=Math.ceil((this.x+this.width-i)*t)/t,r=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=s-this.x,this.height=r-this.y,this}enlarge(t){let i=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=s-i,this.y=r,this.height=n-r,this}getBounds(t){return t=t||new S,t.copyFrom(this),t}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};var pe=0,Ze=500;function K(...e){pe!==Ze&&(pe++,pe===Ze?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...e))}var ei=ls(ti(),1);var N=ei.default;var X=class{constructor(t,i,s){this._x=i||0,this._y=s||0,this._observer=t}clone(t){return new X(t??this._observer,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this._observer.onUpdate()),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer.onUpdate()),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer.onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer.onUpdate(this))}};var ye={default:-1};function R(e="default"){return ye[e]===void 0&&(ye[e]=-1),++ye[e]}function Ut(e,t,i){let s=e.length,r;if(t>=s||i===0)return;i=t+i>s?s-t:i;let n=s-i;for(r=t;r<n;++r)e[r]=e[r+i];e.length=n}var ii={allowChildren:!0,removeChildren(e=0,t){let i=t??this.children.length,s=i-e,r=[];if(s>0&&s<=i){for(let n=i-1;n>=e;n--){let o=this.children[n];!o||(this.layerGroup&&this.layerGroup.removeChild(o),r.push(o),o.parent=null)}Ut(this.children,e,i);for(let n=0;n<r.length;++n)this.emit("childRemoved",r[n],this,n),r[n].emit("removed",this);return r}else if(s===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(e){let t=this.getChildAt(e);return this.removeChild(t)},getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]},setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(e),this.addChildAt(e,t)},getChildIndex(e){let t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(e,t){this.allowChildren||T(E,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:i}=this;if(t<0||t>i.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${i.length}`);if(e.parent){let s=e.parent.children.indexOf(e);if(e.parent===this&&s===t)return e;s!==-1&&e.parent.children.splice(s,1)}return t===i.length?i.push(e):i.splice(t,0,e),e.parent=this,e.didChange=!0,e.didViewUpdate=!1,e._updateFlags=15,this.layerGroup&&this.layerGroup.addChild(e),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",e,this,t),e.emit("added",this),e},swapChildren(e,t){if(e===t)return;let i=this.getChildIndex(e),s=this.getChildIndex(t);this.children[i]=t,this.children[s]=e},removeFromParent(){this.parent?.removeChild(this)}};var ge=class{constructor(t){this.pipe="filter",this.priority=1,this.filters=t?.filters}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null}},si=[];function ri(e){let t=si.pop()||new ge;return t.filters=e,t}function ni(e){e.filters=null,si.push(e)}var _e=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let i=0;i<this._tests.length;i++){let s=this._tests[i];if(s.test(t))return fe.get(s.maskClass,t)}return t}returnMaskEffect(t){fe.return(t)}},Xt=new _e;Lt.handleByList(dt.MaskEffect,Xt._effectClasses);var oi={_mask:null,_filters:null,effects:[],addEffect(e){this.effects.indexOf(e)===-1&&(this.effects.push(e),this.effects.sort((i,s)=>i.priority-s.priority),!this.isLayerRoot&&this.layerGroup&&(this.layerGroup.structureDidChange=!0),this._updateIsSimple())},removeEffect(e){let t=this.effects.indexOf(e);t!==-1&&(this.effects.splice(t,1),!this.isLayerRoot&&this.layerGroup&&(this.layerGroup.structureDidChange=!0),this._updateIsSimple())},set mask(e){if(this._mask||(this._mask={mask:null,effect:null}),this._mask.mask===e||(this._mask.effect&&(this.removeEffect(this._mask.effect),Xt.returnMaskEffect(this._mask.effect),this._mask.effect=null),this._mask.mask=e,e==null))return;let t=Xt.getMaskEffect(e);this._mask.effect=t,this.addEffect(t)},get mask(){return this._mask?.mask},set filters(e){if(!Array.isArray(e)&&e!==null&&(e=[e]),this._filters||(this._filters={filters:null,effect:null}),this._filters.filters===e||(this._filters.effect&&(this.removeEffect(this._filters.effect),ni(this._filters.effect),this._filters.effect=null),this._filters.filters=e,!e))return;let t=ri(e);this._filters.effect=t,this.addEffect(t)},get filters(){return this._filters?.filters}};var hi={label:null,get name(){return T(E,"Container.name property has been removed, use Container.label instead"),this.label},set name(e){T(E,"Container.name property has been removed, use Container.label instead"),this.label=e},getChildByName(e,t=!1){return this.getChildByLabel(e,t)},getChildByLabel(e,t=!1){let i=this.children;for(let s=0;s<i.length;s++){let r=i[s];if(r.label===e||e instanceof RegExp&&e.test(r.label))return r}if(t)for(let s=0;s<i.length;s++){let n=i[s].getChildByLabel(e,!0);if(n)return n}return null},getChildrenByLabel(e,t=!1,i=[]){let s=this.children;for(let r=0;r<s.length;r++){let n=s[r];(n.label===e||e instanceof RegExp&&e.test(n.label))&&i.push(n)}if(t)for(let r=0;r<s.length;r++)s[r].getChildrenByLabel(e,!0,i);return i}};var V=class{constructor(t=1/0,i=1/0,s=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this._matrixStack=[],this.matrix=new b,this.minX=t,this.minY=i,this.maxX=s,this.maxY=r}get rectangle(){this._rectangle||(this._rectangle=new S);let t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this._matrixStack.length=0,this.matrix.identity()}pushMatrix(t){this._matrixStack.push(t),this._matrixStack.length>1?(this.matrix.copyFrom(this._matrixStack[this._matrixStack.length-2]),this.matrix.append(t)):this.matrix.copyFrom(t)}popMatrix(){this._matrixStack.pop(),this._matrixStack.length>1?(this.matrix.copyFrom(this._matrixStack[this._matrixStack.length-2]),this.matrix.append(this._matrixStack[this._matrixStack.length-1])):this._matrixStack.length===1?this.matrix.copyFrom(this._matrixStack[0]):this.matrix.identity()}setMatrix(t){this.matrix.copyFrom(t)}set(t,i,s,r){this.minX=t,this.minY=i,this.maxX=s,this.maxY=r}addFrame(t,i,s,r){let n=this.matrix,o=n.a,h=n.b,a=n.c,l=n.d,d=n.tx,c=n.ty,f=this.minX,u=this.minY,m=this.maxX,y=this.maxY,_=o*t+a*i+d,g=h*t+l*i+c;f=_<f?_:f,u=g<u?g:u,m=_>m?_:m,y=g>y?g:y,_=o*s+a*i+d,g=h*s+l*i+c,f=_<f?_:f,u=g<u?g:u,m=_>m?_:m,y=g>y?g:y,_=o*t+a*r+d,g=h*t+l*r+c,f=_<f?_:f,u=g<u?g:u,m=_>m?_:m,y=g>y?g:y,_=o*s+a*r+d,g=h*s+l*r+c,f=_<f?_:f,u=g<u?g:u,m=_>m?_:m,y=g>y?g:y,this.minX=f,this.minY=u,this.maxX=m,this.maxY=y}addRect(t){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height)}addBounds(t){this.addFrame(t.minX,t.minY,t.maxX,t.maxY)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){let i=this.minX,s=this.minY,r=this.maxX,n=this.maxY,{a:o,b:h,c:a,d:l,tx:d,ty:c}=t,f=o*i+a*s+d,u=h*i+l*s+c;this.minX=f,this.minY=u,this.maxX=f,this.maxY=u,f=o*r+a*s+d,u=h*r+l*s+c,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY,f=o*i+a*n+d,u=h*i+l*n+c,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY,f=o*r+a*n+d,u=h*r+l*n+c,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}pad(t,i=t){return this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new V(this.minX,this.minY,this.maxX,this.maxY)}scale(t,i=t){return this.minX*=t,this.minY*=i,this.maxX*=t,this.maxY*=i,this}get x(){return this.minX}get y(){return this.minY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,i,s){let r=this.minX,n=this.minY,o=this.maxX,h=this.maxY,a=this.matrix,l=a.a,d=a.b,c=a.c,f=a.d,u=a.tx,m=a.ty;for(let y=i;y<s;y+=2){let _=t[y],g=t[y+1],p=l*_+c*g+u,x=d*_+f*g+m;r=p<r?p:r,n=x<n?x:n,o=p>o?p:o,h=x>h?x:h}this.minX=r,this.minY=n,this.maxX=o,this.maxY=h}toString(){return`[@pixi:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}};function et(e,t){let i=t._scale,s=t._pivot,r=t._position,n=i._x,o=i._y,h=s._x,a=s._y;e.a=t._cx*n,e.b=t._sx*n,e.c=t._cy*o,e.d=t._sy*o,e.tx=r._x-(h*e.a+a*e.c),e.ty=r._y-(h*e.b+a*e.d)}function ai(e,t,i){i.clear();let s;return e.parent?t?s=e.parent.worldTransform:s=Tt(e,new b):s=b.IDENTITY,li(e,i,s,t),i.isValid||i.set(0,0,0,0),i}function li(e,t,i,s){if(!e.visible||!e.measurable)return;let r;s?r=e.worldTransform:(e.didChange&&et(e.localTransform,e),r=b.shared.appendFrom(e.localTransform,i).clone());let n=t,o=!!e.effects.length;o&&(t=t.clone()),e.view&&(t.setMatrix(r),e.view.addBounds(t));for(let h=0;h<e.children.length;h++)li(e.children[h],t,r,s);if(o){for(let h=0;h<e.effects.length;h++)e.effects[h].addBounds?.(t);n.setMatrix(b.IDENTITY),n.addBounds(t)}}function Tt(e,t){let i=e.parent;return i&&(Tt(i,t),i.didChange&&et(i.localTransform,i),t.append(i.localTransform)),t}function ut(e,t,i){t.clear(),i||(i=new b),e.view&&(t.setMatrix(i),e.view.addBounds(t));for(let s=0;s<e.children.length;s++)ci(e.children[s],t,i,e);return t.isValid||t.set(0,0,0,0),t}function ci(e,t,i,s){if(!e.visible||!e.measurable)return;e.didChange&&et(e.localTransform,e);let r=e.localTransform,n=b.shared.appendFrom(r,i).clone(),o=t,h=!!e.effects.length;h&&(t=new V),e.view&&(t.setMatrix(n),e.view.addBounds(t));for(let a=0;a<e.children.length;a++)ci(e.children[a],t,n,s);if(h){for(let a=0;a<e.effects.length;a++)e.effects[a].addLocalBounds?.(t,s);o.setMatrix(b.IDENTITY),o.addBounds(t)}}var Ct=new V,Pt=new b,di={get width(){return Math.abs(this.scale.x*ut(this,Ct,Pt).width)},set width(e){let t=ut(this,Ct,Pt).width;t!==0?this.scale.x=e/t:this.scale.x=1},get height(){return Math.abs(this.scale.y*ut(this,Ct,Pt).height)},set height(e){let t=ut(this,Ct,Pt).height;t!==0?this.scale.y=e/t:this.scale.y=1},getLocalBounds(e){let t=ut(this,new V,Pt);return e?e.copyFromBounds(t):t.rectangle.clone()},getBounds(e,t){let i=ai(this,e,Ct);return t?t.copyFromBounds(i):i.rectangle.clone()}};var ui={_onRender:null,set onRender(e){let t=this.layerGroup;if(!e){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=e},get onRender(){return this._onRender}};var fi={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0)},sortChildren(){!this.sortDirty||(this.sortDirty=!1,this.children.sort(ws))}};function ws(e,t){return e._zIndex-t._zIndex}var pi={getGlobalPosition(e=new k,t=!1){return this.parent?this.parent.toGlobal(this._position,e,t):(e.x=this._position.x,e.y=this._position.y),e},toGlobal(e,t,i=!1){if(!i){this.didChange&&et(this.localTransform,this);let s=Tt(this,new b);return s.append(this.localTransform),s.apply(e,t)}return this.worldTransform.apply(e,t)},toLocal(e,t,i,s){if(t&&(e=t.toGlobal(e,i,s)),!s){this.didChange&&et(this.localTransform,this);let r=Tt(this,new b);return r.append(this.localTransform),r.applyInverse(e,i)}return this.worldTransform.applyInverse(e,i)}};var Gt=class{constructor(){this.uid=R("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}lastInstruction(){return this.instructions[this.instructionSize-1]}};var Ht=class{constructor(t){this.type="layer",this.root=null,this.canBundle=!1,this.layerGroupParent=null,this.layerGroupChildren=[],this._children=[],this.worldTransform=new b,this.worldColor=4294967295,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Gt,this._onRenderContainers=[],this.root=t,this.addChild(t)}get localTransform(){return this.root.localTransform}get layerTransform(){return this.root.layerTransform}addLayerGroupChild(t){t.layerGroupParent&&t.layerGroupParent._removeLayerGroupChild(t),t.layerGroupParent=this,this.onChildUpdate(t.root),this.layerGroupChildren.push(t)}_removeLayerGroupChild(t){t.root.didChange&&this._removeChildFromUpdate(t.root);let i=this.layerGroupChildren.indexOf(t);i>-1&&this.layerGroupChildren.splice(i,1),t.layerGroupParent=null}addChild(t){if(this.structureDidChange=!0,t!==this.root&&(this._children.push(t),t.updateTick=-1,t.parent===this.root?t.relativeLayerDepth=1:t.relativeLayerDepth=t.parent.relativeLayerDepth+1,t._onRender&&this.addOnRender(t)),t.layerGroup){if(t.layerGroup.root===t){this.addLayerGroupChild(t.layerGroup);return}}else t.layerGroup=this,t.didChange=!0;let i=t.children;t.isLayerRoot||this.onChildUpdate(t);for(let s=0;s<i.length;s++)this.addChild(i[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&this.removeOnRender(t),t.layerGroup.root!==t){let s=t.children;for(let r=0;r<s.length;r++)this.removeChild(s[r]);t.didChange&&t.layerGroup._removeChildFromUpdate(t),t.layerGroup=null}else this._removeLayerGroupChild(t.layerGroup);let i=this._children.indexOf(t);i>-1&&this._children.splice(i,1)}onChildUpdate(t){let i=this.childrenToUpdate[t.relativeLayerDepth];i||(i=this.childrenToUpdate[t.relativeLayerDepth]={index:0,list:[]}),i.list[i.index++]=t}updateRenderable(t){t.layerVisibleRenderable<3||(t.didViewUpdate=!1,this.instructionSet.renderPipes[t.view.renderPipeId].updateRenderable(t))}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}_removeChildFromUpdate(t){let i=this.childrenToUpdate[t.relativeLayerDepth];if(!i)return;let s=i.list.indexOf(t);s>-1&&i.list.splice(s,1),i.index--}get isRenderable(){let t=this.worldColor>>24&255;return this.root.localVisibleRenderable===3&&t>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){this._onRenderContainers.forEach(t=>{t._onRender()})}};function mi(e){return Object.fromEntries(Object.entries(e).filter(([t,i])=>i!==void 0))}var yi=new X(null),be=new X(null),xe=new X(null,1,1),gi=1,vs=2,_i=4;var H=class extends N{constructor(t={}){super(),this.uid=R("renderable"),this._updateFlags=15,this.isLayerRoot=!1,this.layerGroup=null,this.didChange=!1,this.didViewUpdate=!1,this.relativeLayerDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new b,this.layerTransform=new b,this.destroyed=!1,this._position=new X(this,0,0),this._scale=xe,this._pivot=be,this._skew=yi,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=4294967295,this.layerColor=4294967295,this.localBlendMode="inherit",this.layerBlendMode="normal",this.localVisibleRenderable=3,this.layerVisibleRenderable=3,t.view&&(this.view=t.view,this.view.owner=this,t.view=void 0),Object.assign(this,mi(t)),this.children=[],t.children?.forEach(i=>this.addChild(i)),this.effects=[],t.effects?.forEach(i=>this.addEffect(i))}static mixin(t){Object.defineProperties(H.prototype,Object.getOwnPropertyDescriptors(t))}addChild(...t){if(this.allowChildren||T(E,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let s=0;s<t.length;s++)this.addChild(t[s]);return t[0]}let i=t[0];return i.parent===this?(this.children.splice(this.children.indexOf(i),1),this.children.push(i),this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),i):(i.parent&&i.parent.removeChild(i),this.children.push(i),this.sortableChildren&&(this.sortDirty=!0),i.parent=this,i.didChange=!0,i.didViewUpdate=!1,i._updateFlags=15,this.layerGroup&&this.layerGroup.addChild(i),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this),i._zIndex!==0&&i.depthOfChildModified(),i)}removeChild(...t){if(t.length>1){for(let r=0;r<t.length;r++)this.removeChild(t[r]);return t[0]}let i=t[0],s=this.children.indexOf(i);return s>-1&&(this.children.splice(s,1),this.layerGroup&&this.layerGroup.removeChild(i)),i.parent=null,this.emit("childRemoved",i,this,s),i.emit("removed",this),i}onUpdate(t){if(t&&t===this._skew&&this._updateSkew(),!this.didChange)if(this.didChange=!0,this.isLayerRoot){let i=this.layerGroup.layerGroupParent;i&&i.onChildUpdate(this)}else this.layerGroup&&this.layerGroup.onChildUpdate(this)}onViewUpdate(){this.didViewUpdate||(this.didViewUpdate=!0,this.layerGroup&&this.layerGroup.onChildViewUpdate(this))}set layer(t){if(this.isLayerRoot&&t===!1)throw new Error("[Pixi] cannot undo a layer just yet");t&&this.enableLayer()}get layer(){return this.isLayerRoot}enableLayer(){if(this.layerGroup&&this.layerGroup.root===this)return;this.isLayerRoot=!0;let t=this.layerGroup;if(t&&t.removeChild(this),this.layerGroup=new Ht(this),t){for(let i=0;i<t.layerGroupChildren.length;i++){let s=t.layerGroupChildren[i],r=s.root;for(;r;){if(r===this){this.layerGroup.addLayerGroupChild(s);break}r=r.parent}}t.addLayerGroupChild(this.layerGroup)}this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.isLayerRoot&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new b),this.layerGroup&&(this.isLayerRoot?this._worldTransform.copyFrom(this.layerGroup.worldTransform):this._worldTransform.appendFrom(this.layerTransform,this.layerGroup.worldTransform)),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.onUpdate(this._skew))}get angle(){return this.rotation*je}set angle(t){this.rotation=t*Ke}get pivot(){return this._pivot===be&&(this._pivot=new X(this,0,0)),this._pivot}set pivot(t){this._pivot===be&&(this._pivot=new X(this,0,0)),this._pivot.copyFrom(t)}get skew(){return this._skew===yi&&(this._skew=new X(this,0,0)),this._skew}get scale(){return this._scale===xe&&(this._scale=new X(this,1,1)),this._scale}set scale(t){this._scale===xe&&(this._scale=new X(this,0,0)),this._scale.copyFrom(t)}_updateSkew(){let t=this._rotation,i=this._skew;this._cx=Math.cos(t+i._y),this._sx=Math.sin(t+i._y),this._cy=-Math.sin(t-i._x),this._sy=Math.cos(t-i._x)}set alpha(t){t=t*255|0,t!==(this.localColor>>24&255)&&(this.localColor=this.localColor&16777215|t<<24,this._updateFlags|=gi,this.onUpdate())}get alpha(){return(this.localColor>>24&255)/255}set tint(t){let s=L.shared.setValue(t).toBgrNumber();s!==(this.localColor&16777215)&&(this.localColor=this.localColor&4278190080|s&16777215,this._updateFlags|=gi,this.onUpdate())}get tint(){let t=this.localColor&16777215;return((t&255)<<16)+(t&65280)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this._updateFlags|=vs,this.localBlendMode=t,this.onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localVisibleRenderable&2)}set visible(t){let i=t?1:0;(this.localVisibleRenderable&2)>>1!==i&&(this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this._updateFlags|=_i,this.localVisibleRenderable=this.localVisibleRenderable&1|i<<1,this.onUpdate())}get renderable(){return!!(this.localVisibleRenderable&1)}set renderable(t){let i=t?1:0;(this.localVisibleRenderable&1)!==i&&(this.localVisibleRenderable=this.localVisibleRenderable&2|i,this._updateFlags|=_i,this.layerGroup&&!this.isLayerRoot&&(this.layerGroup.structureDidChange=!0),this.onUpdate())}get isRenderable(){let t=this.layerColor>>24&255;return this.localVisibleRenderable===3&&t>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0,this.removeFromParent(),this.parent=null,this._mask=null,this._filters=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed"),this.removeAllListeners();let i=typeof t=="boolean"?t:t?.children,s=this.removeChildren(0,this.children.length);if(i)for(let r=0;r<s.length;++r)s[r].destroy(t);this.view&&(this.view.destroy(t),this.view.owner=null)}};H.mixin(ii);H.mixin(pi);H.mixin(ui);H.mixin(di);H.mixin(oi);H.mixin(hi);H.mixin(fi);var bi={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};var ft=class{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=ft.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new k,this.page=new k,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,s,r,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}};var we=/iPhone/i,xi=/iPod/i,wi=/iPad/i,vi=/\biOS-universal(?:.+)Mac\b/i,ve=/\bAndroid(?:.+)Mobile\b/i,Mi=/Android/i,pt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,$t=/Silk/i,J=/Windows Phone/i,Ti=/\bWindows(?:.+)ARM\b/i,Ci=/BlackBerry/i,Pi=/BB10/i,ki=/Opera Mini/i,Si=/\b(CriOS|Chrome)(?:.+)Mobile/i,Ai=/Mobile(?:.+)Firefox\b/i,Ii=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function Ms(e){return function(t){return t.test(e)}}function kt(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var i=t.userAgent,s=i.split("[FBAN");typeof s[1]<"u"&&(i=s[0]),s=i.split("Twitter"),typeof s[1]<"u"&&(i=s[0]);var r=Ms(i),n={apple:{phone:r(we)&&!r(J),ipod:r(xi),tablet:!r(we)&&(r(wi)||Ii(t))&&!r(J),universal:r(vi),device:(r(we)||r(xi)||r(wi)||r(vi)||Ii(t))&&!r(J)},amazon:{phone:r(pt),tablet:!r(pt)&&r($t),device:r(pt)||r($t)},android:{phone:!r(J)&&r(pt)||!r(J)&&r(ve),tablet:!r(J)&&!r(pt)&&!r(ve)&&(r($t)||r(Mi)),device:!r(J)&&(r(pt)||r($t)||r(ve)||r(Mi))||r(/\bokhttp\b/i)},windows:{phone:r(J),tablet:r(Ti),device:r(J)||r(Ti)},other:{blackberry:r(Ci),blackberry10:r(Pi),opera:r(ki),firefox:r(Ai),chrome:r(Si),device:r(Ci)||r(Pi)||r(ki)||r(Ai)||r(Si)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}var Ts=kt.default??kt,Ei=Ts(globalThis.navigator);H.mixin(bi);var Cs=9,Nt=100,Ps=0,ks=0,Ri=2,Fi=1,Ss=-1e3,As=-1e3,Is=2,Vt=class{constructor(t,i=Ei){this._mobileInfo=i,this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(i.tablet||i.phone)&&this._createTouchHook();let s=document.createElement("div");s.style.width=`${Nt}px`,s.style.height=`${Nt}px`,s.style.position="absolute",s.style.top=`${Ps}px`,s.style.left=`${ks}px`,s.style.zIndex=Ri.toString(),this._div=s,this._renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let t=document.createElement("button");t.style.width=`${Fi}px`,t.style.height=`${Fi}px`,t.style.position="absolute",t.style.top=`${Ss}px`,t.style.left=`${As}px`,t.style.zIndex=Is.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}_destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.add(this),this._renderer.view.canvas.parentNode?.appendChild(this._div))}_deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this),this._div.parentNode?.removeChild(this._div))}_updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this._addChild(t),t.renderId=this._renderId);let i=t.children;if(i)for(let s=0;s<i.length;s++)this._updateAccessibleObjects(i[s])}init(t){this.debug=t?.debug??this.debug,this._renderer.runners.postrender.remove(this)}postrender(){let t=performance.now();if(this._mobileInfo.android.device&&t<this._androidUpdateCount||(this._androidUpdateCount=t+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered);let{x:i,y:s,width:r,height:n}=this._renderer.view.canvas.getBoundingClientRect(),{width:o,height:h,resolution:a}=this._renderer,l=r/o*a,d=n/h*a,c=this._div;c.style.left=`${i}px`,c.style.top=`${s}px`,c.style.width=`${o}px`,c.style.height=`${h}px`;for(let f=0;f<this._children.length;f++){let u=this._children[f];if(u.renderId!==this._renderId)u._accessibleActive=!1,Ut(this._children,f,1),this._div.removeChild(u._accessibleDiv),this._pool.push(u._accessibleDiv),u._accessibleDiv=null,f--;else{c=u._accessibleDiv;let m=u.hitArea,y=u.worldTransform;u.hitArea?(c.style.left=`${(y.tx+m.x*y.a)*l}px`,c.style.top=`${(y.ty+m.y*y.d)*d}px`,c.style.width=`${m.width*y.a*l}px`,c.style.height=`${m.height*y.d*d}px`):(m=u.getBounds(),this.capHitArea(m),c.style.left=`${m.x*l}px`,c.style.top=`${m.y*d}px`,c.style.width=`${m.width*l}px`,c.style.height=`${m.height*d}px`,c.title!==u.accessibleTitle&&u.accessibleTitle!==null&&(c.title=u.accessibleTitle),c.getAttribute("aria-label")!==u.accessibleHint&&u.accessibleHint!==null&&c.setAttribute("aria-label",u.accessibleHint)),(u.accessibleTitle!==c.title||u.tabIndex!==c.tabIndex)&&(c.title=u.accessibleTitle,c.tabIndex=u.tabIndex,this.debug&&this.updateDebugHTML(c))}}this._renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);let{width:i,height:s}=this._renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>s&&(t.height=s-t.y)}_addChild(t){let i=this._pool.pop();i||(i=document.createElement("button"),i.style.width=`${Nt}px`,i.style.height=`${Nt}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=Ri.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`container ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.container=t,this._children.push(t),this._div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){let{container:s}=t.target,r=this._renderer.events.rootBoundary,n=Object.assign(new ft(r),{target:s});r.rootTarget=this._renderer.lastObjectRendered,i.forEach(o=>r.dispatchEvent(n,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===Cs&&this._activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this._deactivate()}destroy(){this._destroyTouchHook(),this._div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this._pool=null,this._children=null,this._renderer=null}};Vt.extension={type:[dt.WebGLSystem,dt.WebGPUSystem],name:"accessibility"};Lt.add(Vt);var Li={createCanvas:(e,t)=>{let i=document.createElement("canvas");return i.width=e,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")};var Wt={ADAPTER:Li,RETINA_PREFIX:/@([0-9\.]+)x/,FAIL_IF_MAJOR_PERFORMANCE_CAVEAT:!1,RESOLUTION:1};var Me=Object.create(null),Yi=Object.create(null);function Oi(e,t){let i=Yi[e];return i===void 0&&(Me[t]===void 0&&(Me[t]=1),Yi[e]=i=Me[t]++),i}var Bi=class extends N{constructor(e={}){super(),this.resourceType="textureSampler",this.touched=0,this._maxAnisotropy=1,e={...Bi.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){T("8","TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get resourceId(){return this._resourceId||this._generateResourceId()}update(){this.emit("change",this),this._resourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._resourceId=Oi(e,"sampler"),this._resourceId}destroy(){this.emit("destroy",this),this.removeAllListeners()}},zt=Bi;zt.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};var Di=class extends N{constructor(e={}){super(),this.options=e,this.uid=R("textureSource"),this.resourceType="textureSource",this.resourceId=R("textureResource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm-srgb",this.dimension="2d",this.antialias=!1,this.depthStencil=!0,this.touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...Di.defaultOptions,...e},this.resource=e.resource,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=e.resource?.width??1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=e.resource?.height??1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode;let t=e.style??{};this.style=t instanceof zt?t:new zt(t),this.destroyed=!1}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}_onStyleChange(){this.emit("styleChange",this)}update(){this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this.resourceId++,this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i=i||this._resolution,e=e||this.width,t=t||this.height;let s=Math.round(e*i),r=Math.round(t*i);this.width=s/i,this.height=r/i,this._resolution=i,!(this.pixelWidth===s&&this.pixelHeight===r)&&(this.pixelWidth=s,this.pixelHeight=r,this.emit("resize",this),this.resourceId++,this.emit("change",this))}set wrapMode(e){T(E,"TextureSource.wrapMode property has been deprecated. Use TextureSource.style.addressMode instead."),this._style.wrapMode=e}get wrapMode(){return T(E,"TextureSource.wrapMode property has been deprecated. Use TextureSource.style.addressMode instead."),this._style.wrapMode}set scaleMode(e){T(E,"TextureSource.scaleMode property has been deprecated. Use TextureSource.style.scaleMode instead."),this._style.scaleMode=e}get scaleMode(){return T(E,"TextureSource.scaleMode property has been deprecated. Use TextureSource.style.scaleMode instead."),this._style.scaleMode}},Z=Di;Z.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"no-premultiply-alpha",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,style:{}};var Ui=(e,t,i=!1)=>(Array.isArray(e)||(e=[e]),t?e.map(s=>typeof s=="string"||i?t(s):s):e);var Te=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let i=this._cache.get(t);return i||K(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){let s=Ui(t),r;for(let h=0;h<this.parsers.length;h++){let a=this.parsers[h];if(a.test(i)){r=a.getCacheableAssets(s,i);break}}r||(r={},s.forEach(h=>{r[h]=i}));let n=Object.keys(r),o={cacheKeys:n,keys:s};s.forEach(h=>{this._cacheMap.set(h,o)}),n.forEach(h=>{this._cache.has(h)&&this._cache.get(h)!==i&&K("[Cache] already has key:",h),this._cache.set(h,r[h])})}remove(t){if(!this._cacheMap.has(t)){K(`[Assets] Asset id ${t} was not found in the Cache`);return}let i=this._cacheMap.get(t);i.cacheKeys.forEach(r=>{this._cache.delete(r)}),i.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}},qt=new Te;var jt=()=>{};var mt=class extends Z{constructor(){super(...arguments),this.uploadMethodId="buffer"}static from(t){let i=t.resource||new Float32Array(t.width*t.height*4),s=t.format;return s||(i instanceof Float32Array?s="rgba32float":i instanceof Int32Array||i instanceof Uint32Array?s="rgba32uint":i instanceof Int16Array||i instanceof Uint16Array?s="rgba16uint":(i instanceof Int8Array,s="bgra8unorm")),new mt({...t,format:s})}};var rt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],nt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ot=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ht=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ce=[],Xi=[],Kt=Math.sign;function Es(){for(let e=0;e<16;e++){let t=[];Ce.push(t);for(let i=0;i<16;i++){let s=Kt(rt[e]*rt[i]+ot[e]*nt[i]),r=Kt(nt[e]*rt[i]+ht[e]*nt[i]),n=Kt(rt[e]*ot[i]+ot[e]*ht[i]),o=Kt(nt[e]*ot[i]+ht[e]*ht[i]);for(let h=0;h<16;h++)if(rt[h]===s&&nt[h]===r&&ot[h]===n&&ht[h]===o){t.push(h);break}}}for(let e=0;e<16;e++){let t=new b;t.set(rt[e],nt[e],ot[e],ht[e],0,0),Xi.push(t)}}Es();var C={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>rt[e],uY:e=>nt[e],vX:e=>ot[e],vY:e=>ht[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Ce[e][t],sub:(e,t)=>Ce[e][C.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?C.S:C.N:Math.abs(t)*2<=Math.abs(e)?e>0?C.E:C.W:t>0?e>0?C.SE:C.SW:e>0?C.NE:C.NW,matrixAppendRotationInv:(e,t,i=0,s=0)=>{let r=Xi[C.inv(t)];r.tx=i,r.ty=s,e.append(r)}};var St=class extends N{constructor(t={}){super(),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=t.frame||new S(0,0,1,1),this.orig=t.orig||this.frame,this.rotate=t.rotate??0,this.trim=t.trim,this.defaultAnchor=t.defaultAnchor,this.defaultBorders=t.defaultBorders,this.updateUvs()}updateUvs(){let t=this.uvs,i=this.frame,s=this.rotate;if(s){let r=i.width/2,n=i.height/2,o=i.x+r,h=i.y+n;s=C.add(s,C.NW),t.x0=o+r*C.uX(s),t.y0=h+n*C.uY(s),s=C.add(s,2),t.x1=o+r*C.uX(s),t.y1=h+n*C.uY(s),s=C.add(s,2),t.x2=o+r*C.uX(s),t.y2=h+n*C.uY(s),s=C.add(s,2),t.x3=o+r*C.uX(s),t.y3=h+n*C.uY(s)}else t.x0=i.x,t.y0=i.y,t.x1=i.x+i.width,t.y1=i.y,t.x2=i.x+i.width,t.y2=i.y+i.height,t.x3=i.x,t.y3=i.y+i.height}update(){this.updateUvs(),this.emit("update",this)}destroy(){this.emit("destroy",this),this.removeAllListeners(),this.frame=null,this.orig=null,this.trim=null,this.defaultAnchor=null,this.uvs=null}};var Gi=new b,Jt=class{constructor(t,i){this.mapCoord=new b,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,i){i===void 0&&(i=t);let s=this.mapCoord;for(let r=0;r<t.length;r+=2){let n=t[r],o=t[r+1];i[r]=n*s.a+o*s.c+s.tx,i[r+1]=n*s.b+o*s.d+s.ty}return i}update(){let t=this._texture;this._updateID++;let i=t.layout.uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);let s=t.layout.orig,r=t.layout.trim;r&&(Gi.set(s.width/r.width,0,0,s.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Gi));let n=t.source,o=this.uClampFrame,h=this.clampMargin/n._resolution,a=this.clampOffset;return o[0]=(t.frameX+h+a)/n.width,o[1]=(t.frameY+h+a)/n.height,o[2]=(t.frameX+t.frameWidth-h+a)/n.width,o[3]=(t.frameY+t.frameHeight-h+a)/n.height,this.uClampOffset[0]=a/n.pixelWidth,this.uClampOffset[1]=a/n.pixelHeight,this.isSimple=t.frameWidth===n.width&&t.frameHeight===n.height&&t.layout.rotate===0,!0}};var w=class extends N{constructor({source:t,layout:i,label:s,frame:r}={}){if(super(),this.id=R("texture"),this.styleSourceKey=0,this.label=s,this.source=t?.source??new Z,i=i instanceof St?i:new St(i),r){let{width:n,height:o}=this._source;i.frame.x=r.x/n,i.frame.y=r.y/o,i.frame.width=r.width/n,i.frame.height=r.height/o,i.updateUvs()}this.layout=i,this.destroyed=!1}static from(t){return typeof t=="string"?qt.get(t):t instanceof Z?new w({source:t}):new w({source:new Z(t)})}static fromBuffer(t){return new w({source:mt.from({...t,style:{scaleMode:"nearest"}})})}set source(t){this._source&&this._source.off("resize",this.onUpdate,this),this._source=t,t.on("resize",this.onUpdate,this),this.emit("update",this)}get source(){return this._source}get layout(){return this._layout}set layout(t){this._layout?.off("update",this.onUpdate,this),this._layout=t,t.on("update",this.onUpdate,this),this.emit("update",this)}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Jt(this)),this._textureMatrix}set frameWidth(t){this._layout.frame.width=t/this._source.width}get frameWidth(){return this._source.pixelWidth/this._source._resolution*this._layout.frame.width}set frameHeight(t){this._layout.frame.height=t/this._source.height}get frameHeight(){return this._source.pixelHeight/this._source._resolution*this._layout.frame.height}set frameX(t){if(t===0){this._layout.frame.x=0;return}this._layout.frame.x=this._source.width/t}get frameX(){return this._source.width*this._layout.frame.x}set frameY(t){if(t===0){this._layout.frame.y=0;return}this._layout.frame.y=this._source.height/t}get frameY(){return this._source.height*this._layout.frame.y}get width(){return this._source.width*this._layout.orig.width}get height(){return this._source.height*this._layout.orig.height}destroy(t=!1){this._layout&&(this._layout.destroy(),this._layout=null),this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}onUpdate(){this.emit("update",this)}get baseTexture(){return T(E,"Texture.baseTexture is now Texture.source"),this._source}};w.EMPTY=new w({});w.EMPTY.label="EMPTY";w.EMPTY.destroy=jt;var Hi=class extends N{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return T(E,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return T(E,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return T(E,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return T(E,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return T(E,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(){this.emit("destroy",this),this.removeAllListeners();for(let t in this.chars)this.chars[t].texture.destroy();this.chars=null}};var Rs={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};function $i(e,t){let i=e.match(/[a-df-z][^a-df-z]*/gi),s=e.match(/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/g)?.map(parseFloat),r=[];i.forEach(a=>{let l=a.match(/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/g)?.map(parseFloat),d=a[0],c=1;l&&(c=l.length/Rs[d.toLowerCase()]);for(let f=0;f<c;f++)r.push(d)});let n=0,o=0,h=0;for(let a=0;a<r.length;a++){let l=r[a];switch(l){case"M":o=s[n++],h=s[n++],t.moveTo(o,h);break;case"m":o+=s[n++],h+=s[n++],t.moveTo(o,h);break;case"H":o=s[n++],t.lineTo(o,h);break;case"h":o+=s[n++],t.lineTo(o,h);break;case"V":h=s[n++],t.lineTo(o,h);break;case"v":h+=s[n++],t.lineTo(o,h);break;case"L":o=s[n++],h=s[n++],t.lineTo(o,h);break;case"l":o+=s[n++],h+=s[n++],t.lineTo(o,h);break;case"C":o=s[n+4],h=s[n+5],t.bezierCurveTo(s[n],s[n+1],s[n+2],s[n+3],o,h),n+=6;break;case"c":t.bezierCurveTo(o+s[n],h+s[n+1],o+s[n+2],h+s[n+3],o+s[n+4],h+s[n+5]),o+=s[n+4],h+=s[n+5],n+=6;break;case"S":o=s[n+2],h=s[n+3],t.bezierCurveToShort(s[n],s[n+1],o,h),n+=4;break;case"s":t.bezierCurveToShort(o+s[n],h+s[n+1],o+s[n+2],h+s[n+3]),o+=s[n+2],h+=s[n+3],n+=4;break;case"Q":o=s[n+2],h=s[n+3],t.quadraticCurveTo(s[n],s[n+1],o,h),n+=4;break;case"q":t.quadraticCurveTo(o+s[n],h+s[n+1],o+s[n+2],h+s[n+3]),o+=s[n+2],h+=s[n+3],n+=4;break;case"T":o=s[n++],h=s[n++],t.quadraticCurveToShort(o,h);break;case"t":o+=s[n++],h+=s[n++],t.quadraticCurveToShort(o,h);break;case"A":o=s[n+5],h=s[n+6],t.arcToSvg(s[n],s[n+1],s[n+2],s[n+3],s[n+4],o,h),n+=7;break;case"a":o+=s[n+5],h+=s[n+6],t.arcToSvg(s[n],s[n+1],s[n+2],s[n+3],s[n+4],o,h),n+=7;break;case"Z":case"z":t.closePath();break;default:K(`Unknown SVG path command: ${l}`)}}return t}var yt=class{constructor(t=0,i=0,s=0){this.type="circle",this.x=t,this.y=i,this.radius=s}clone(){return new yt(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;let s=this.radius*this.radius,r=this.x-t,n=this.y-i;return r*=r,n*=n,r+n<=s}getBounds(t){return t=t||new S,t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}};var gt=class{constructor(t=0,i=0,s=0,r=0){this.type="ellipse",this.x=t,this.y=i,this.halfWidth=s,this.halfHeight=r}clone(){return new gt(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,i){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,r=(i-this.y)/this.halfHeight;return s*=s,r*=r,s+r<=1}getBounds(){return new S(this.x-this.halfWidth,this.y-this.halfHeight,this.halfWidth*2,this.halfHeight*2)}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}};var it=class{constructor(...t){this.type="polygon";let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){let s=[];for(let r=0,n=i.length;r<n;r++)s.push(i[r].x,i[r].y);i=s}this.points=i,this.closePath=!0}clone(){let t=this.points.slice(),i=new it(t);return i.closePath=this.closePath,i}contains(t,i){let s=!1,r=this.points.length/2;for(let n=0,o=r-1;n<r;o=n++){let h=this.points[n*2],a=this.points[n*2+1],l=this.points[o*2],d=this.points[o*2+1];a>i!=d>i&&t<(l-h)*((i-a)/(d-a))+h&&(s=!s)}return s}getBounds(t){t=t||new S;let i=this.points,s=1/0,r=-1/0,n=1/0,o=-1/0;for(let h=0,a=i.length;h<a;h+=2){let l=i[h],d=i[h+1];s=l<s?l:s,r=l>r?l:r,n=d<n?d:n,o=d>o?d:o}return t.x=s,t.width=r-s,t.y=n,t.height=o-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}};var _t=class{constructor(t=0,i=0,s=0,r=0,n=20){this.type="roundedRectangle",this.x=t,this.y=i,this.width=s,this.height=r,this.radius=n}getBounds(t){return t=t||new S,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new _t(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){let s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+s&&i<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let r=t-(this.x+s),n=i-(this.y+s),o=s*s;if(r*r+n*n<=o||(r=t-(this.x+this.width-s),r*r+n*n<=o)||(n=i-(this.y+this.height-s),r*r+n*n<=o)||(r=t-(this.x+s),r*r+n*n<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}};var Zt=11920929e-14,Fs=1,Pe=.01,bt=0,at=0;function Qt(e,t,i,s,r,n,o,h,a){let d=Fs/1;return d*=d,Ls(t,i,s,r,n,o,h,a,e,d),e}function Ls(e,t,i,s,r,n,o,h,a,l){ke(e,t,i,s,r,n,o,h,a,l,0),a.push(o,h)}function ke(e,t,i,s,r,n,o,h,a,l,d){if(d>8)return;let c=Math.PI,f=(e+i)/2,u=(t+s)/2,m=(i+r)/2,y=(s+n)/2,_=(r+o)/2,g=(n+h)/2,p=(f+m)/2,x=(u+y)/2,O=(m+_)/2,B=(y+g)/2,P=(p+O)/2,M=(x+B)/2;if(d>0){let v=o-e,A=h-t,$=Math.abs((i-o)*A-(s-h)*v),D=Math.abs((r-o)*A-(n-h)*v),I,tt;if($>Zt&&D>Zt){if(($+D)*($+D)<=l*(v*v+A*A)){if(bt<Pe){a.push(P,M);return}let wt=Math.atan2(n-s,r-i);if(I=Math.abs(wt-Math.atan2(s-t,i-e)),tt=Math.abs(Math.atan2(h-n,o-r)-wt),I>=c&&(I=2*c-I),tt>=c&&(tt=2*c-tt),I+tt<bt){a.push(P,M);return}if(at!==0){if(I>at){a.push(i,s);return}if(tt>at){a.push(r,n);return}}}}else if($>Zt){if($*$<=l*(v*v+A*A)){if(bt<Pe){a.push(P,M);return}if(I=Math.abs(Math.atan2(n-s,r-i)-Math.atan2(s-t,i-e)),I>=c&&(I=2*c-I),I<bt){a.push(i,s),a.push(r,n);return}if(at!==0&&I>at){a.push(i,s);return}}}else if(D>Zt){if(D*D<=l*(v*v+A*A)){if(bt<Pe){a.push(P,M);return}if(I=Math.abs(Math.atan2(h-n,o-r)-Math.atan2(n-s,r-i)),I>=c&&(I=2*c-I),I<bt){a.push(i,s),a.push(r,n);return}if(at!==0&&I>at){a.push(r,n);return}}}else if(v=P-(e+o)/2,A=M-(t+h)/2,v*v+A*A<=l){a.push(P,M);return}}ke(e,t,f,u,p,x,P,M,a,l,d+1),ke(P,M,O,B,_,g,o,h,a,l,d+1)}var Ys=11920929e-14,Os=1,Bs=.01,Ni=0;function Vi(e,t,i,s,r,n,o){let a=Os/1;return a*=a,Ds(t,i,s,r,n,o,e,a),e}function Ds(e,t,i,s,r,n,o,h){Se(o,e,t,i,s,r,n,h,0),o.push(r,n)}function Se(e,t,i,s,r,n,o,h,a){if(a>8)return;let l=Math.PI,d=(t+s)/2,c=(i+r)/2,f=(s+n)/2,u=(r+o)/2,m=(d+f)/2,y=(c+u)/2,_=n-t,g=o-i,p=Math.abs((s-n)*g-(r-o)*_);if(p>Ys){if(p*p<=h*(_*_+g*g)){if(Ni<Bs){e.push(m,y);return}let x=Math.abs(Math.atan2(o-r,n-s)-Math.atan2(r-i,s-t));if(x>=l&&(x=2*l-x),x<Ni){e.push(m,y);return}}}else if(_=m-(t+n)/2,g=y-(i+o)/2,_*_+g*g<=h){e.push(m,y);return}Se(e,t,i,d,c,m,y,h,a+1),Se(e,m,y,f,u,n,o,h,a+1)}function te(e,t,i,s,r,n,o,h){let a=Math.abs(r-n);(!o&&r>n||o&&n>r)&&(a=2*Math.PI-a),h=h||Math.max(6,Math.floor(6*Math.pow(s,1/3)*(a/Math.PI))),h=Math.max(h,3);let l=a/h,d=r;l*=o?-1:1;for(let c=0;c<h+1;c++){let f=Math.cos(d),u=Math.sin(d),m=t+f*s,y=i+u*s;e.push(m,y),d+=l}}function Wi(e,t,i,s,r,n){let o=e[e.length-2],a=e[e.length-1]-i,l=o-t,d=r-i,c=s-t,f=Math.abs(a*c-l*d);if(f<1e-8||n===0){(e[e.length-2]!==t||e[e.length-1]!==i)&&e.push(t,i);return}let u=a*a+l*l,m=d*d+c*c,y=a*d+l*c,_=n*Math.sqrt(u)/f,g=n*Math.sqrt(m)/f,p=_*y/u,x=g*y/m,O=_*c+g*l,B=_*d+g*a,P=l*(g+p),M=a*(g+p),v=c*(_+x),A=d*(_+x),$=Math.atan2(M-B,P-O),D=Math.atan2(A-B,v-O);te(e,O+t,B+i,n,$,D,l*d>c*a)}var At=Math.PI*2,Ae={centerX:0,centerY:0,ang1:0,ang2:0},Ie=({x:e,y:t},i,s,r,n,o,h,a)=>{e*=i,t*=s;let l=r*e-n*t,d=n*e+r*t;return a.x=l+o,a.y=d+h,a};function Us(e,t){let i=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:i,r=Math.cos(e),n=Math.sin(e),o=Math.cos(e+t),h=Math.sin(e+t);return[{x:r-n*s,y:n+r*s},{x:o+h*s,y:h-o*s},{x:o,y:h}]}var zi=(e,t,i,s)=>{let r=e*s-t*i<0?-1:1,n=e*i+t*s;return n>1&&(n=1),n<-1&&(n=-1),r*Math.acos(n)},Xs=(e,t,i,s,r,n,o,h,a,l,d,c,f)=>{let u=Math.pow(r,2),m=Math.pow(n,2),y=Math.pow(d,2),_=Math.pow(c,2),g=u*m-u*_-m*y;g<0&&(g=0),g/=u*_+m*y,g=Math.sqrt(g)*(o===h?-1:1);let p=g*r/n*c,x=g*-n/r*d,O=l*p-a*x+(e+i)/2,B=a*p+l*x+(t+s)/2,P=(d-p)/r,M=(c-x)/n,v=(-d-p)/r,A=(-c-x)/n,$=zi(1,0,P,M),D=zi(P,M,v,A);h===0&&D>0&&(D-=At),h===1&&D<0&&(D+=At),f.centerX=O,f.centerY=B,f.ang1=$,f.ang2=D};function qi(e,t,i,s,r,n,o,h=0,a=0,l=0){if(n===0||o===0)return;let d=Math.sin(h*At/360),c=Math.cos(h*At/360),f=c*(t-s)/2+d*(i-r)/2,u=-d*(t-s)/2+c*(i-r)/2;if(f===0&&u===0)return;n=Math.abs(n),o=Math.abs(o);let m=Math.pow(f,2)/Math.pow(n,2)+Math.pow(u,2)/Math.pow(o,2);m>1&&(n*=Math.sqrt(m),o*=Math.sqrt(m)),Xs(t,i,s,r,n,o,a,l,d,c,f,u,Ae);let{ang1:y,ang2:_}=Ae,{centerX:g,centerY:p}=Ae,x=Math.abs(_)/(At/4);Math.abs(1-x)<1e-7&&(x=1);let O=Math.max(Math.ceil(x),1);_/=O;let B=e[e.length-2],P=e[e.length-1],M={x:0,y:0};for(let v=0;v<O;v++){let A=Us(y,_),{x:$,y:D}=Ie(A[0],n,o,c,d,g,p,M),{x:I,y:tt}=Ie(A[1],n,o,c,d,g,p,M),{x:wt,y:Le}=Ie(A[2],n,o,c,d,g,p,M);Qt(e,B,P,$,D,I,tt,wt,Le),B=wt,P=Le,y+=_}}var Gs=new S,ee=class{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new V,this._graphicsPath2D=t}moveTo(t,i){return this.startPoly(t,i),this}lineTo(t,i){this._ensurePoly();let s=this._currentPoly.points,r=s[s.length-2],n=s[s.length-1];return(r!==t||n!==i)&&s.push(t,i),this}arc(t,i,s,r,n,o){this._ensurePoly(!1);let h=this._currentPoly.points;return te(h,t,i,s,r,n,o),this}arcTo(t,i,s,r,n){this._ensurePoly();let o=this._currentPoly.points;return Wi(o,t,i,s,r,n),this}arcToSvg(t,i,s,r,n,o,h){let a=this._currentPoly.points;return qi(a,this._currentPoly.lastX,this._currentPoly.lastY,o,h,t,i,s,r,n),this}bezierCurveTo(t,i,s,r,n,o){this._ensurePoly();let h=this._currentPoly;return Qt(this._currentPoly.points,h.lastX,h.lastY,t,i,s,r,n,o),this}quadraticCurveTo(t,i,s,r){this._ensurePoly();let n=this._currentPoly;return Vi(this._currentPoly.points,n.lastX,n.lastY,t,i,s,r),this}closePath(){return this.endPoly(!0),this}addPath(t,i){this.endPoly(),i&&!i.isIdentity()&&(t=t.clone(!0),t.transform(i));for(let s=0;s<t.instructions.length;s++){let r=t.instructions[s];this[r.action](...r.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,i,s,r,n){return this.drawShape(new S(t,i,s,r),n),this}circle(t,i,s,r){return this.drawShape(new yt(t,i,s),r),this}poly(t,i,s){let r=new it(t);r.closePath=i,this.drawShape(r,s)}ellipse(t,i,s,r,n){return this.drawShape(new gt(t,i,s,r),n),this}roundRect(t,i,s,r,n,o){return this.drawShape(new _t(t,i,s,r,n),o),this}drawShape(t,i){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:i}),this}startPoly(t,i){let s=this._currentPoly;return s&&this.endPoly(),s=new it,s.points.push(t,i),this._currentPoly=s,this}endPoly(t=!1){let i=this._currentPoly;return i&&i.points.length>2&&(i.closePath=t,this.shapePrimitives.push({shape:i})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new it,t)){let i=this.shapePrimitives[this.shapePrimitives.length-1];if(i){let s=i.shape.x,r=i.shape.y;if(i.transform.isIdentity()){let n=i.transform,o=s;s=n.a*s+n.c*r+n.tx,r=n.b*o+n.d*r+n.ty}this._currentPoly.points.push(s,s)}else this._currentPoly.points.push(0,0)}}buildPath(){let t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let i=0;i<t.instructions.length;i++){let s=t.instructions[i];this[s.action](...s.data)}this.finish()}get bounds(){let t=this._bounds;t.clear();let i=this.shapePrimitives;for(let s=0;s<i.length;s++){let r=i[s],n=r.shape.getBounds(Gs);r.transform?(t.pushMatrix(r.transform),t.addRect(n),t.popMatrix()):t.addRect(n)}return t}};var q=class{constructor(t){this.instructions=[],this.uid=R("graphicsPath"),this._dirty=!0,typeof t=="string"?$i(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new ee(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,i){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,i]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,i,s,r){let n=this.instructions[this.instructions.length-1],o=this._getLastPoint(k.shared),h=0,a=0;if(!n||n.action!=="bezierCurveTo")h=o.x,a=o.y;else{h=n.data[2],a=n.data[3];let l=o.x,d=o.y;h=l+(l-h),a=d+(d-a)}return this.instructions.push({action:"bezierCurveTo",data:[h,a,t,i,s,r]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,i){let s=this.instructions[this.instructions.length-1],r=this._getLastPoint(k.shared),n=0,o=0;if(!s||s.action!=="quadraticCurveTo")n=r.x,o=r.y;else{n=s.data[0],o=s.data[1];let h=r.x,a=r.y;n=h+(h-n),o=a+(a-o)}return this.instructions.push({action:"quadraticCurveTo",data:[n,o,t,i]}),this._dirty=!0,this}rect(t,i,s,r,n){return this.instructions.push({action:"rect",data:[t,i,s,r,n]}),this._dirty=!0,this}circle(t,i,s,r){return this.instructions.push({action:"circle",data:[t,i,s,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}star(t,i,s,r,n,o=0,h){n=n||r/2;let a=-1*Math.PI/2+o,l=s*2,d=Math.PI*2/l,c=[];for(let f=0;f<l;f++){let u=f%2?n:r,m=f*d+a;c.push(t+u*Math.cos(m),i+u*Math.sin(m))}return this.poly(c,!0,h),this}clone(t=!1){let i=new q;if(!t)i.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){let r=this.instructions[s];i.instructions.push({action:r.action,data:r.data.slice()})}return i}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;let i=t.a,s=t.b,r=t.c,n=t.d,o=t.tx,h=t.ty,a=0,l=0,d=0,c=0,f=0,u=0,m=0,y=0;for(let _=0;_<this.instructions.length;_++){let g=this.instructions[_],p=g.data;switch(g.action){case"moveTo":case"lineTo":a=p[0],l=p[1],p[0]=i*a+r*l+o,p[1]=s*a+n*l+h;break;case"bezierCurveTo":d=p[0],c=p[1],f=p[2],u=p[3],a=p[4],l=p[5],p[0]=i*d+r*c+o,p[1]=s*d+n*c+h,p[2]=i*f+r*u+o,p[3]=s*f+n*u+h,p[4]=i*a+r*l+o,p[5]=s*a+n*l+h;break;case"quadraticCurveTo":d=p[0],c=p[1],a=p[2],l=p[3],p[0]=i*d+r*c+o,p[1]=s*d+n*c+h,p[2]=i*a+r*l+o,p[3]=s*a+n*l+h;break;case"arcToSvg":a=p[5],l=p[6],m=p[0],y=p[1],p[0]=i*m+r*y,p[1]=s*m+n*y,p[5]=i*a+r*l+o,p[6]=s*a+n*l+h;break;case"rect":p[4]=Ee(p[4],t);break;case"ellipse":p[8]=Ee(p[8],t);break;case"roundRect":p[5]=Ee(p[5],t);break;case"addPath":p[0].transform(t);break;default:K("unknown transform action",g.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}_getLastPoint(t){let i=this.instructions.length-1,s=this.instructions[i];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(i--,i<0)return t.x=0,t.y=0,t;s=this.instructions[i]}let r,n,o;switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":t.x=s.data[0].lastX,t.y=s.data[2].lastY;break;case"rect":if(o=s.data[4],r=s.data[0],n=s.data[1],o){let{a:h,b:a,c:l,d,tx:c,ty:f}=o;t.x=h*r+l*n+c,t.y=a*r+d*n+f}else t.x=r,t.y=n;break;default:K(`${s.action} is not supported yet`);break}return t}};function Ee(e,t){return e?e.prepend(t):t.clone()}function ji(e,t){if(typeof e=="string"){let s=document.createElement("div");s.innerHTML=e.trim(),e=s.querySelector("svg")}let i={context:t,path:new q};return Ki(e,i,null,null),t}function Ki(e,t,i,s){let r=e.children,{fillStyle:n,strokeStyle:o}=Hs(e);n&&i?i={...i,...n}:n&&(i=n),o&&s?s={...s,...o}:o&&(s=o),t.context.fillStyle=i,t.context.strokeStyle=s;let h,a,l,d,c,f,u,m,y,_,g,p,x,O,B,P,M;switch(e.nodeName.toLowerCase()){case"path":O=e.getAttribute("d"),B=new q(O),t.context.path(B),i&&t.context.fill(),s&&t.context.stroke();break;case"circle":u=Y(e,"cx",0),m=Y(e,"cy",0),y=Y(e,"r",0),t.context.ellipse(u,m,y,y),i&&t.context.fill(),s&&t.context.stroke();break;case"rect":h=Y(e,"x",0),a=Y(e,"y",0),P=Y(e,"width",0),M=Y(e,"height",0),_=Y(e,"rx",0),g=Y(e,"ry",0),_||g?t.context.roundRect(h,a,P,M,_||g):t.context.rect(h,a,P,M),i&&t.context.fill(),s&&t.context.stroke();break;case"ellipse":u=Y(e,"cx",0),m=Y(e,"cy",0),_=Y(e,"rx",0),g=Y(e,"ry",0),t.context.beginPath(),t.context.ellipse(u,m,_,g),i&&t.context.fill(),s&&t.context.stroke();break;case"line":l=Y(e,"x1",0),d=Y(e,"y1",0),c=Y(e,"x2",0),f=Y(e,"y2",0),t.context.beginPath(),t.context.moveTo(l,d),t.context.lineTo(c,f),s&&t.context.stroke();break;case"polygon":x=e.getAttribute("points"),p=x.match(/\d+/g).map(v=>parseInt(v,10)),t.context.poly(p,!0),i&&t.context.fill(),s&&t.context.stroke();break;case"polyline":x=e.getAttribute("points"),p=x.match(/\d+/g).map(v=>parseInt(v,10)),t.context.poly(p,!1),s&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${e.nodeName}> elements unsupported`);break}}for(let v=0;v<r.length;v++)Ki(r[v],t,i,s)}function Y(e,t,i){let s=e.getAttribute(t);return s?Number(s):i}function Hs(e){let t=e.getAttribute("style"),i={},s={},r=!1,n=!1;if(t){let o=t.split(";");for(let h=0;h<o.length;h++){let a=o[h],[l,d]=a.split(":");switch(l){case"stroke":d!=="none"&&(i.color=L.shared.setValue(d).toNumber(),n=!0);break;case"stroke-width":i.width=Number(d);break;case"fill":d!=="none"&&(r=!0,s.color=L.shared.setValue(d).toNumber());break;case"fill-opacity":s.alpha=Number(d);break;case"stroke-opacity":i.alpha=Number(d);break;case"opacity":s.alpha=Number(d),i.alpha=Number(d);break}}}else{let o=e.getAttribute("stroke");o&&o!=="none"&&(n=!0,i.color=L.shared.setValue(o).toNumber(),i.width=Y(e,"stroke-width",1));let h=e.getAttribute("fill");h&&h!=="none"&&(r=!0,s.color=L.shared.setValue(h).toNumber())}return{strokeStyle:n?i:null,fillStyle:r?s:null}}var It=class extends Z{constructor(){super(...arguments),this.uploadMethodId="image"}},ie=Wt.ADAPTER.createCanvas(),lt=1;ie.width=lt;ie.height=lt;var Q=ie.getContext("2d");Q.fillStyle="#ffffff";Q.fillRect(0,0,lt,lt);Q.beginPath();Q.moveTo(0,0);Q.lineTo(lt,0);Q.lineTo(lt,lt);Q.closePath();Q.fillStyle="#ffffff";Q.fill();w.WHITE=new w({source:new It({resource:ie})});w.WHITE.label="WHITE";w.WHITE.destroy=jt;var Re=class{constructor(e,t,i,s){this.uid=R("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=e,this.y0=t,this.x1=i,this.y1=s}addColorStop(e,t){return this.gradientStops.push({offset:e,color:L.shared.setValue(t).toHex()}),this}buildLinearGradient(){let e=Re.defaultTextureSize,{gradientStops:t}=this,i=Wt.ADAPTER.createCanvas();i.width=e,i.height=e;let s=i.getContext("2d"),r=s.createLinearGradient(0,0,Re.defaultTextureSize,1);for(let m=0;m<t.length;m++){let y=t[m];r.addColorStop(y.offset,y.color)}s.fillStyle=r,s.fillRect(0,0,e,e),this.texture=new w({source:new It({resource:i,style:{addressModeU:"clamp-to-edge",addressModeV:"repeat"}})});let{x0:n,y0:o,x1:h,y1:a}=this,l=new b,d=h-n,c=a-o,f=Math.sqrt(d*d+c*c),u=Math.atan2(c,d);l.translate(-n,-o),l.scale(1/e,1/e),l.rotate(-u),l.scale(256/f,1),this.transform=l}},Fe=Re;Fe.defaultTextureSize=256;var Ji={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},se=class{constructor(t,i){this.uid=R("fillPattern"),this.transform=new b,this.texture=t,this.transform.scale(1/t.frameWidth,1/t.frameHeight),i&&(t.source.style.addressModeU=Ji[i].addressModeU,t.source.style.addressModeV=Ji[i].addressModeV)}setTransform(t){let i=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/i.frameWidth,1/i.frameHeight)}};function Et(e,t){if(!e)return null;let i,s;if(e?.fill?(s=e.fill,i={...t,...e}):(s=e,i=t),L.isColorLike(s)){let n=L.shared.setValue(s??0);return{...i,color:n.toNumber(),alpha:i.alpha??n.alpha,texture:w.WHITE}}else if(s instanceof se){let n=s;return{...i,color:16777215,texture:n.texture,matrix:n.transform,fill:i.fill??null}}else if(s instanceof Fe){let n=s;return n.buildLinearGradient(),{...i,color:16777215,texture:n.texture,matrix:n.transform}}let r={...t,...e};if(r.texture!==w.WHITE){let n=r.matrix||new b;n.scale(1/r.texture.frameWidth,1/r.texture.frameHeight),r.matrix=n,r.color=16777215}return r.color=L.shared.setValue(r.color).toNumber(),r}var xt=new k,Zi=new b,ct=class extends N{constructor(){super(...arguments),this.uid=R("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new q,this._transform=new b,this._fillStyle={...ct.defaultFillStyle},this._strokeStyle={...ct.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new V,this._boundsDirty=!0}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Et(e,ct.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Et(e,ct.defaultStrokeStyle)}texture(e,t,i,s,r,n){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:s||0,dw:r||e.frameWidth,dh:n||e.frameHeight,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?L.shared.setValue(t).toNumber():0}}),this.onUpdate(),this}beginPath(){return this._activePath=new q,this}fill(e,t){let i,s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(e&&(t!==void 0&&typeof e=="number"&&(T("8.0.0","GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this.fillStyle=Et(e,ct.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._activePath.instructions.length=0,this._tick=0,this):this}stroke(e){let t,i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?t=i.data.path:t=this._activePath.clone(),t?(e&&(this.strokeStyle=Et(e,ct.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._activePath.instructions.length=0,this._tick=0,this):this}cut(){for(let e=0;e<2;e++){let t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();t&&(t.action==="stroke"||t.action==="fill")&&(t.data.hole=i)}return this._activePath.instructions.length=0,this}arc(e,t,i,s,r,n){this._tick++;let o=this._transform;return this._activePath.arc(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,i,s,r,n),this}arcTo(e,t,i,s,r){this._tick++;let n=this._transform;return this._activePath.arcTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty,n.a*i+n.c*s+n.tx,n.b*i+n.d*s+n.ty,r),this}arcToSvg(e,t,i,s,r,n,o){this._tick++;let h=this._transform;return this._activePath.arcToSvg(e,t,i,s,r,h.a*n+h.c*o+h.tx,h.b*n+h.d*o+h.ty),this}bezierCurveTo(e,t,i,s,r,n){this._tick++;let o=this._transform;return this._activePath.bezierCurveTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*s+o.tx,o.b*i+o.d*s+o.ty,o.a*r+o.c*n+o.tx,o.b*r+o.d*n+o.ty),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,i,s){return this._tick++,this._activePath.ellipse(e,t,i,s,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;let i=this._transform;return this._activePath.moveTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}quadraticCurveTo(e,t,i,s){this._tick++;let r=this._transform;this._activePath.quadraticCurveTo(r.a*e+r.c*t+r.tx,r.b*e+r.d*t+r.ty,r.a*i+r.c*s+r.tx,r.b*i+r.d*s+r.ty)}rect(e,t,i,s){return this._tick++,this._activePath.rect(e,t,i,s,this._transform.clone()),this}roundRect(e,t,i,s,r){return this._tick++,this._activePath.roundRect(e,t,i,s,r,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}star(e,t,i,s,r,n){return this._tick++,this._activePath.star(e,t,i,s,r,n,this._transform.clone()),this}svg(e){this._tick++,ji(e,this)}restore(){let e=this._stateStack.pop();e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle)}save(){this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}})}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,s,r,n){return e instanceof b?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,i,s,r,n),this)}transform(e,t,i,s,r,n){return e instanceof b?(this._transform.append(e),this):(Zi.set(e,t,i,s,r,n),this._transform.append(Zi),this)}translate(e,t){return this._transform.translate(e,t),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t],s=i.action;if(s==="fill"){let r=i.data;e.addBounds(r.path.bounds)}else if(s==="texture"){let r=i.data;e.pushMatrix(r.transform),e.addFrame(r.dx,r.dy,r.dx+r.dw,r.dy+r.dh),e.popMatrix()}}return e}containsPoint(e){let t=this.instructions,i=!1;return t.forEach(s=>{let r=s.data,n=r.path;if(!s.action||!n)return;let o=r.style,h=n.shapePath?.shapePrimitives;this._forEachShape(h,a=>{if(!o||!a)return;typeof o!="number"&&o.matrix?o.matrix.applyInverse(e,xt):xt.copyFrom(e),i=a.contains(xt.x,xt.y);let l=r.hole;if(!l)return;let d=l.shapePath?.shapePrimitives;!d||this._forEachShape(d,c=>{c.contains(xt.x,xt.y)&&(i=!1)})})}),i}_forEachShape(e,t){e?.forEach(i=>{let s=i?.shape;s&&t(s)})}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}},Qi=ct;Qi.defaultFillStyle={color:0,alpha:1,texture:w.WHITE,matrix:null,fill:null};Qi.defaultStrokeStyle={width:1,color:0,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:w.WHITE,matrix:null,fill:null};var ts={onViewUpdate:()=>{}};function es(e,t,i,s){let r=i._source,n=i.layout,o=n.orig,h=n.trim,a=r.width,l=r.height,d=a*o.width,c=l*o.height;if(h){let f=a*h.width,u=l*h.height;e[0]=h.x*a-t._x*d-s,e[1]=e[0]+f,e[2]=h.y*l-t._y*c-s,e[3]=e[2]+u}else e[0]=-t._x*d-s,e[1]=e[0]+d,e[2]=-t._y*c-s,e[3]=e[2]+c}var re=class{constructor(t){this.renderPipeId="sprite",this.owner=ts,this.uid=R("spriteView"),this.batched=!0,this._didUpdate=!1,this._bounds=[0,1,0,0],this._sourceBounds=[0,1,0,0],this._boundsDirty=!0,this._sourceBoundsDirty=!0,this.roundPixels=0,this.anchor=new X(this,t.layout.defaultAnchor?.x||0,t.layout.defaultAnchor?.y||0),this.texture=t}set texture(t){t||(t=w.EMPTY),this._texture!==t&&(this._texture&&this._texture.off("update",this.onUpdate,this),t.on("update",this.onUpdate,this),this._texture=t,this.onUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){let i=this._texture.frameWidth,s=this._texture.frameHeight,r=-i*this.anchor.x,n=0;return t.x>=r&&t.x<r+i&&(n=-s*this.anchor.y,t.y>=n&&t.y<n+s)}addBounds(t){if(this._texture._layout.trim){let s=this.sourceBounds;t.addFrame(s[0],s[2],s[1],s[3])}else{let s=this.bounds;t.addFrame(s[0],s[2],s[1],s[3])}}onUpdate(){this._didUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,this.owner.onViewUpdate()}_updateBounds(){es(this._bounds,this.anchor,this._texture,0)}_updateSourceBounds(){let t=this.anchor,i=this._texture,s=i._source,n=i.layout.orig,o=this._sourceBounds,h=s.width*n.width,a=s.height*n.height;o[1]=-t._x*h,o[0]=o[1]+h,o[3]=-t._y*a,o[2]=o[3]+a}destroy(t=!1){if(this.anchor=null,typeof t=="boolean"?t:t?.texture){let s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._texture=null,this._bounds=null,this._sourceBounds=null}};var Rt=class extends H{static from(t){return typeof t=="string"?new Rt(qt.get(t)):new Rt(t)}constructor(t=w.EMPTY){t instanceof w&&(t={texture:t});let{texture:i,...s}=t;super({view:new re(i??w.EMPTY),label:"Sprite",...s}),this.allowChildren=!1}get anchor(){return this.view.anchor}set anchor(t){this.view.anchor.x=t.x,this.view.anchor.y=t.y}get texture(){return this.view.texture}set texture(t){this.view.texture=t}get roundPixels(){return!!this.view.roundPixels}set roundPixels(t){this.view.roundPixels=t?1:0}};export{hs as a,ls as b,k as c,ft as d,dt as e,Lt as f,N as g,L as h,b as i,R as j,E as k,T as l,ge as m,fe as n,S as o,V as p,et as q,ai as r,K as s,ut as t,Gt as u,gi as v,vs as w,_i as x,H as y,bi as z,Vt as A,Wt as B,Ui as C,qt as D,Oi as E,zt as F,Z as G,Jt as H,w as I,Hi as J,it as K,It as L,Fe as M,se as N,Et as O,Qi as P,ts as Q,es as R,Rt as S};
